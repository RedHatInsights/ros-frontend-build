"use strict";(self.webpackChunkros_frontend=self.webpackChunkros_frontend||[]).push([[798],{86503:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(63038),a=n.n(r),o=n(6479),i=n.n(o),c=n(67154),l=n.n(c),s=n(43297),u=n.n(s),m=n(45697),p=n.n(m),f=n(2983),d=n(79943),y=n(45103),h=u().lazy((function(){return Promise.all([n.e(939),n.e(192),n.e(91),n.e(671),n.e(632),n.e(837)]).then(n.bind(n,88422))})),g=function(e){var t=(0,f.v9)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id}));return u().createElement(s.Suspense,{fallback:""},u().createElement(h,l()({inventoryId:t},e)))},v=function(e){var t=e.getRegistry,n=i()(e,["getRegistry"]),r=(0,s.useState)(),o=a()(r,2),c=o[0],l=o[1];return(0,s.useEffect)((function(){var e,n;t&&(null===(e=t())||void 0===e||null===(n=e.register)||void 0===n||n.call(e,{systemRecsReducer:d.rj})),l((function(){return t?f.zt:s.Fragment}))}),[t]),c?u().createElement(c,t&&{store:t().getStore()},u().createElement(g,n)):u().createElement(y.Bullseye,null,u().createElement(y.Spinner,{size:"xl"}))};v.propTypes={getRegistry:p().func};const E=v},6997:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ge});var r=n(67154),a=n.n(r),o=n(59713),i=n.n(o),c=n(87757),l=n.n(c),s=n(48926),u=n.n(s),m=n(34575),p=n.n(m),f=n(93913),d=n.n(f),y=n(2205),h=n.n(y),g=n(78585),v=n.n(g),E=n(29754),w=n.n(E),b=n(43297),D=n.n(b),O=n(45697),S=n.n(O),I=n(16530),P=n(2983),x=n(45103),j=n(14748),_=n(80123),k=n(38775),R=n(53895),C=n(30319),L=n(94778),T=n(18546);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={loaded:!1},F=function(e){return N(N({},e),{},{loaded:!0})},U=n(24814),B=n(63038),G=n.n(B),Z=n(11239),A=n(49580),V=n(61088),Y=n(90502),H=n(58061),W=function(e){var t=e.system,n=(0,b.useState)(t.rating),r=G()(n,2),a=r[0],o=r[1],i=(0,b.useState)(!1),c=G()(i,2),s=c[0],m=c[1],p=function(){var e=u()(l().mark((function e(n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a===n?H.nV:n,e.prev=1,i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventory_id:t.inventoryId,rating:r})},e.next=5,fetch("".concat(H.RC).concat(H.Up),i);case 5:o(r),m(!0),setTimeout((function(){return m(!1)}),3e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return D().createElement("span",{className:"ratingSpanOverride"},"Is this suggestion helpful?",D().createElement(x.Button,{variant:"plain","aria-label":"thumbs-up",onClick:function(){return p(H.xP)},ouiaId:"thumbsUp"},a===H.xP?D().createElement(V.ZP,{className:"like",size:"sm"}):D().createElement(Z.ZP,{size:"sm"})),D().createElement(x.Button,{variant:"plain","aria-label":"thumbs-down",onClick:function(){return p(H.RM)},ouiaId:"thumbsDown"},a===H.RM?D().createElement(Y.ZP,{className:"dislike",size:"sm"}):D().createElement(A.ZP,{size:"sm"})),s&&"Thank you for your feedback!")};W.propTypes={system:S().object};const J=W;var q=n(36269),Q=n(85333),$=n(87999),K=n(77938),X=n(29296),ee=n(32576),te=n(7716),ne=n(10310),re=n(40621),ae=n(2370),oe=n(26383),ie=n(66207),ce=n(74174),le=n(96466),se=n(55795),ue=n(30859),me=function(e,t){var n=[],r=new Date,a={datapoints:[]},o={datapoints:[]},i=new Map;e.reverse().forEach((function(e){i.set(new Date(e.report_date).toDateString(),e)}));for(var c=t-1;c>=0;c--){var l=new Date;l=new Date(l.setDate(r.getDate()-c)).toDateString(),i.has(l)?(a.datapoints.push({name:"CPU Utilization",x:new Date(l),y:i.get(l).cpu}),o.datapoints.push({name:"Memory Utilization",x:new Date(l),y:i.get(l).memory})):(a.datapoints.push({name:"CPU Utilization",x:new Date(l),y:null}),o.datapoints.push({name:"Memory Utilization",x:new Date(l),y:null}))}return n.push(a),n.push(o),n},pe=function(e){var t=e.inventoryId,n=(0,b.useState)(!1),r=G()(n,2),a=r[0],o=r[1],i=(0,b.useState)(H.Mo),c=G()(i,2),s=c[0],m=c[1],p=(0,b.useState)([]),f=G()(p,2),d=f[0],y=f[1],h=(0,b.useState)(!1),g=G()(h,2),v=g[0],E=g[1],w=(0,X.f)("zoom","voronoi");(0,b.useEffect)((function(){function e(){return(e=u()(l().mark((function e(){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=s===H.Mo?H.Mo:H.zO,e.next=4,(0,ue.tp)(t,n);case 4:r=e.sent,a=me(r.data,s),y(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),E(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}y([]),function(){e.apply(this,arguments)}()}),[s]);var O,S,I,P=function(e){e!==s&&y([]),m(e),o(!a)},j=[D().createElement(x.DropdownItem,{key:"action_7",component:"button",onClick:function(){return P(H.Mo)}},"Last 7 Days"),D().createElement(x.DropdownItem,{key:"action_45",component:"button",onClick:function(){return P(H.NG)}},"Last 45 Days")];return v?D().createElement(x.FlexItem,{alignSelf:{default:"alignSelfBaseline"}},D().createElement(x.EmptyState,{variant:x.EmptyStateVariant.small},D().createElement(x.Title,{headingLevel:"h2",size:"lg"},"Something went wrong"),D().createElement(x.EmptyStateBody,null,"There was a problem while requesting historical data. Please try again later."))):0===d.length?D().createElement(x.FlexItem,{alignSelf:{default:"alignSelfBaseline"}},D().createElement(x.Bullseye,null,D().createElement(x.Spinner,{size:"xl","aria-labelledby":"loading-historical-chart"}))):D().createElement(x.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfBaseline"},align:{default:"alignRight"}},D().createElement(x.FlexItem,{align:{default:"alignRight"}},D().createElement("div",{className:"chartDateFilter"},D().createElement(x.Tooltip,{content:D().createElement("div",null,"Scroll and pan to zoom and move")},D().createElement(se.ZP,{size:"sm"})),D().createElement(x.Dropdown,{className:"dateDropdown",toggle:D().createElement(x.DropdownToggle,{id:"chart-date-toggle",onToggle:function(e){o(e)},toggleIndicator:le.ZP},"Last ".concat(s===H.Mo?H.Mo:H.zO," Days")),isOpen:a,dropdownItems:j}))),D().createElement(x.FlexItem,{align:{default:"alignRight"},className:"historical-chart-panel"},D().createElement(ee.k,{domain:(O=new Date,S=new Date,I=s===H.Mo?H.Mo:H.NG,{y:[0,100],x:[S=new Date(S.setDate(O.getDate()-I)),O]}),scale:{x:"time",y:"linear"},containerComponent:D().createElement(w,{labels:function(e){return t=e.datum,n=new Date(t.x),r=(new Date).toDateString()===n.toDateString()?"Today":"".concat(n.getDate()," ").concat(H.gg[n.getMonth()]),r=t.name.includes("CPU")?"".concat(r,"\n   \n"):"",t.childName.includes("scatter-")&&null!==t.y?"".concat(r).concat(t.name,": ").concat(t.y,"%"):null;var t,n,r},labelComponent:D().createElement(te.L,{labelComponent:D().createElement(ne.Df,{style:[{fill:"white",fontSize:16,fontWeight:700},{fill:"white"},{fill:"white"},{fill:"white"}]})}),constrainToVisibleArea:!0,voronoiDimension:"x",zoomDimension:"x"}),legendData:[{name:"CPU Utilization"},{name:"Memory Utilization"}],legendOrientation:"vertical",legendPosition:"right",height:275,width:756,maxDomain:{y:100},minDomain:{y:0},padding:{bottom:50,left:50,right:165,top:50},themeColor:re.nz.blue},D().createElement(ae.C,{tickValues:d[0].datapoints.map((function(e){return e.x})),tickFormat:function(e){return(new Date).toDateString()===new Date(e).toDateString()?"Today":"".concat(new Date(e).getDate()," ").concat(H.gg[new Date(e).getMonth()])},fixLabelOverlap:!0,tickCount:6}),D().createElement(ae.C,{dependentAxis:!0,showGrid:!0,tickValues:[0,20,40,60,80,100],tickFormat:function(e){return"".concat(e,"%")}}),D().createElement(oe.G,null,d.map((function(e,t){return D().createElement(ie.L,{data:e.datapoints,key:"scatter-"+t,name:"scatter-"+t})}))),D().createElement(oe.G,null,d.map((function(e,t){return D().createElement(ce.m,{key:"line-"+t,name:"line-"+t,data:e.datapoints})}))))))};pe.propTypes={inventoryId:S().string};var fe=n(86503),de=n(55140);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=function(e){h()(o,e);var t,n,r,a=(n=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w()(n);if(r){var a=w()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return v()(this,e)});function o(e){var t;return p()(this,o),(t=a.call(this,e)).state={inventoryId:t.props.match.params.inventoryId},t}return d()(o,[{key:"componentDidMount",value:(t=u()(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=this.props.chrome)||null===(t=n.hideGlobalFilter)||void 0===t||t.call(n,!0),n.appAction("system-detail"),e.next=5,this.props.loadSystemInfo(this.state.inventoryId);case 5:document.title=this.props.rosSystemInfo.display_name;case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderChildrenNode",value:function(){if(this.props.rosSystemInfo){var e=this.props.rosSystemInfo,t=e.cloud_provider,n=e.instance_type,r=e.idling_time,a=e.report_date,o=e.rating,i=e.state,c=this.props.match.params.inventoryId;return D().createElement(x.Flex,{alignItems:{default:"alignItemsCenter"}},D().createElement(x.Flex,{grow:{default:"grow"},className:"ros-system-info"},D().createElement(x.Flex,{flex:{default:"flex_4"},direction:{default:"column"}},D().createElement(x.FlexItem,null,D().createElement(x.DescriptionList,{className:"expanded-row",isCompact:!0,isHorizontal:!0},D().createElement(x.DescriptionListGroup,null,D().createElement(x.DescriptionListTerm,null,"Last reported"),D().createElement(x.DescriptionListDescription,null,(0,K.hb)(a))),D().createElement(x.DescriptionListGroup,null,D().createElement(x.DescriptionListTerm,null,"State"),D().createElement(x.DescriptionListDescription,null,D().createElement(q.l,{stateValue:i})))),D().createElement(U.v,{cloudProvider:t,instanceType:n,idlingTime:r,inventoryId:c}),D().createElement(J,{system:{rating:o,inventoryId:c}}))),D().createElement(x.Flex,{grow:{default:"grow"},direction:{default:"column"}},D().createElement(pe,{inventoryId:c}))))}return null}},{key:"render",value:function(){var e=this,t=this.props.entity;return D().createElement(D().Fragment,null,D().createElement($.B.Consumer,null,(function(n){return!1===n.permissions.systemsRead?D().createElement(Q.Z,{serviceName:"Resource Optimization"}):D().createElement(k.Z,{inventoryId:e.state.inventoryId,onLoad:function(e){var t=e.mergeWithDetail,n=e.INVENTORY_ACTION_TYPES;(0,C.z2)(t(function(e){var t=e.LOAD_ENTITY_FULFILLED;return(0,T.Gg)(i()({},t,F),M)}(n)))},className:"rosDetailWrapper"},D().createElement(_.Z,null,D().createElement(x.Breadcrumb,{ouiaId:"system-detail"},D().createElement(x.BreadcrumbItem,null,D().createElement(I.Link,{to:"/"},"Resource Optimization")),D().createElement(x.BreadcrumbItem,{isActive:!0},D().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},t?t.display_name:null))),D().createElement(x.Stack,{hasGutter:!0},D().createElement(x.StackItem,null,D().createElement(R.Z,{hideBack:!0,showDelete:!1,hideInvDrawer:!0,className:"rosDetailsHead"})),D().createElement(x.StackItem,{isFilled:!0},e.renderChildrenNode()))),D().createElement(j.Z,null,D().createElement(x.Grid,{gutter:"md"},D().createElement(x.GridItem,{span:12},t?D().createElement(fe.default,{showTags:!0,fallback:""}):D().createElement(x.Spinner,null)))))})))}}]),o}(D().Component);he.propTypes={match:S().any,entity:S().object,loading:S().bool,rosSystemInfo:S().object,loadSystemInfo:S().func,chrome:S().object};const ge=(0,I.withRouter)((0,P.$j)((function(e,t){var n,r;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({entity:e.entityDetails&&e.entityDetails.entity,loading:null===(n=e.systemDetailReducer)||void 0===n?void 0:n.loading,rosSystemInfo:null===(r=e.systemDetailReducer)||void 0===r?void 0:r.systemInfo},t)}),(function(e){return{loadSystemInfo:function(t){return e((0,L.Of)(t))}}}))((function(e){var t=(0,de.Z)();return D().createElement(he,a()({},e,{chrome:t}))})))},30859:(e,t,n)=>{n.d(t,{jL:()=>d,S7:()=>y,x2:()=>h,lc:()=>g,tp:()=>v,Q5:()=>E});var r=n(87757),a=n.n(r),o=n(48926),i=n.n(o),c=n(59713),l=n.n(c),s=n(88587),u=n(58061);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){if(!e.ok)throw Error(e.statusText);return e}var d=function(){var e=new URL(u.RC+u.LO,window.location.origin);return fetch(e).then(f).then((function(e){return e.json()})).then((function(e){return e}))},y=function(e){var t=new URL(u.RC+u.M4+"/".concat(e),window.location.origin);return fetch(t).then(f).then((function(e){return e.json()})).then((function(e){return e}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(n=p(p({},n),{},{description:t.description}));var r=new URL(u.RC+u.M4+"/".concat(e,"/suggestions"),window.location.origin);r.search=new URLSearchParams(n).toString();var a=fetch(r).then((function(e){if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return e}));return a},g=function(){var e=i()(a().mark((function e(t){var n,r,o,i,c,l,m,f,d,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(i=t||{}).perPage,l=i.orderBy,m=i.orderHow,f=p(p({order_by:{display_name:"display_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[l]||"report_date",order_how:m||s.SortByDirection.desc,limit:c||-1},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),d=new URL(u.RC+u.M4,window.location.origin),y=new URLSearchParams(f),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){y.append("state",e)})),null==t||null===(o=t.osFilter)||void 0===o||o.forEach((function(e){y.append("os",e)})),d.search=y.toString(),e.abrupt("return",fetch(d).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=new URL("".concat(u.RC).concat(u.M4,"/").concat(e,"/history"),window.location.origin),r=new URLSearchParams({limit:t});return n.search=r.toString(),fetch(n).then(f).then((function(e){return e.json()})).then((function(e){return e}))},E=function(){var e=i()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(u.t5,window.location.origin),e.abrupt("return",fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"executiveReport"})}).then(f).then((function(e){return e.blob()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},94778:(e,t,n)=>{n.d(t,{Of:()=>a,t9:()=>o,Pn:()=>i,zz:()=>c});var r=n(30859),a=function(e){return{type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.S7)(e)}},o=function(e,t){return{type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.x2)(e,t)}},i=function(){return{type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.jL)()}},c=function(e){return{type:"CHANGE_SYSTEM_COLUMNS",payload:e}}}}]);