(self.webpackChunkros_frontend=self.webpackChunkros_frontend||[]).push([[798],{86503:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(63038),a=n.n(r),o=n(6479),i=n.n(o),c=n(67154),s=n.n(c),l=n(1427),u=n.n(l),m=n(45697),p=n.n(m),d=n(2983),f=n(79943),h=n(8896),y=n(67463),g=u().lazy((function(){return Promise.all([n.e(939),n.e(514),n.e(324),n.e(254),n.e(386),n.e(381),n.e(403),n.e(263),n.e(505)]).then(n.bind(n,88422))})),v=function(e){var t=(0,d.v9)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id}));return u().createElement(l.Suspense,{fallback:""},u().createElement(g,s()({inventoryId:t},e)))},w=function(e){var t=e.getRegistry,n=i()(e,["getRegistry"]),r=(0,l.useState)(),o=a()(r,2),c=o[0],s=o[1];return(0,l.useEffect)((function(){var e,n;t&&(null===(e=t())||void 0===e||null===(n=e.register)||void 0===n||n.call(e,{systemRecsReducer:f.rj})),s((function(){return t?d.zt:l.Fragment}))}),[t]),c?u().createElement(c,t&&{store:t().getStore()},u().createElement(v,n)):u().createElement(h.b,null,u().createElement(y.Spinner,{size:"xl"}))};w.propTypes={getRegistry:p().func};const E=w},6997:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>xe});var r=n(59713),a=n.n(r),o=n(87757),i=n.n(o),c=n(48926),s=n.n(c),l=n(34575),u=n.n(l),m=n(93913),p=n.n(m),d=n(2205),f=n.n(d),h=n(78585),y=n.n(h),g=n(29754),v=n.n(g),w=n(1427),E=n.n(w),b=n(45697),O=n.n(b),D=n(16530),S=n(2983),P=n(49287),j=n(18038),I=n(85991),_=n(49489),k=n(86350),x=n(48716),R=n(38775),C=n(53895),z=n(33902),N=n(30319),T=n(94778),L=n(18546),M=n(86503);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={loaded:!1},Z=function(e){return F(F({},e),{},{loaded:!0,activeApps:[{title:"Resource optimization",name:"resource optimization",component:M.default}]})},G=n(24814),B=n(63038),V=n.n(B),Y=n(6202),H=n(11239),W=n(49580),q=n(61088),J=n(90502),Q=n(14906),$=function(e){var t=e.system,n=(0,w.useState)(t.rating),r=V()(n,2),a=r[0],o=r[1],c=(0,w.useState)(!1),l=V()(c,2),u=l[0],m=l[1],p=function(){var e=s()(i().mark((function e(n){var r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a===n?Q.nV:n,e.prev=1,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventory_id:t.inventoryId,rating:r})},e.next=5,fetch("".concat(Q.RC).concat(Q.Up),c);case 5:o(r),m(!0),setTimeout((function(){return m(!1)}),3e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return E().createElement("span",{className:"ratingSpanOverride"},"Is this suggestion helpful?",E().createElement(Y.Button,{variant:"plain","aria-label":"thumbs-up",onClick:function(){return p(Q.xP)},ouiaId:"thumbsUp"},a===Q.xP?E().createElement(q.ZP,{className:"like",size:"sm"}):E().createElement(H.ZP,{size:"sm"})),E().createElement(Y.Button,{variant:"plain","aria-label":"thumbs-down",onClick:function(){return p(Q.RM)},ouiaId:"thumbsDown"},a===Q.RM?E().createElement(J.ZP,{className:"dislike",size:"sm"}):E().createElement(W.ZP,{size:"sm"})),u&&"Thank you for your feedback!")};$.propTypes={system:O().object};const K=$;var X=n(36269),ee=n(56067),te=n(87999),ne=n(49099),re=n(90446),ae=n(698),oe=n(91845),ie=n(7805),ce=n(32576),se=n(40621),le=n(2370),ue=n(26383),me=n(66207),pe=n(74174),de=n(8896),fe=n(22910),he=n(96823),ye=n(80765),ge=n(219),ve=n(74183),we=n(67463),Ee=n(34348),be=n(76004),Oe=n(96466),De=n(55795),Se=n(30859),Pe=function(e,t){var n=[],r=new Date,a={datapoints:[]},o={datapoints:[]},i=new Map;e.forEach((function(e){i.set(new Date(e.report_date).toDateString(),e)}));for(var c=t-1;c>=0;c--){var s=new Date;s=new Date(s.setDate(r.getDate()-c)).toDateString(),i.has(s)?(a.datapoints.push({name:"CPU Utilization",x:new Date(s),y:i.get(s).cpu}),o.datapoints.push({name:"Memory Utilization",x:new Date(s),y:i.get(s).memory})):(a.datapoints.push({name:"CPU Utilization",x:new Date(s),y:null}),o.datapoints.push({name:"Memory Utilization",x:new Date(s),y:null}))}return n.push(a),n.push(o),n},je=function(e){var t=e.inventoryId,n=(0,w.useState)(!1),r=V()(n,2),a=r[0],o=r[1],c=(0,w.useState)(Q.Mo),l=V()(c,2),u=l[0],m=l[1],p=(0,w.useState)([]),d=V()(p,2),f=d[0],h=d[1],y=(0,w.useState)(!1),g=V()(y,2),v=g[0],b=g[1],O=(0,ie.f)("zoom","voronoi");(0,w.useEffect)((function(){function e(){return(e=s()(i().mark((function e(){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=u===Q.Mo?Q.Mo:Q.zO,e.next=4,(0,Se.tp)(t,n);case 4:r=e.sent,a=Pe(r.data,u),h(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}h([]),function(){e.apply(this,arguments)}()}),[u]);var D,S,P,j=function(e){e!==u&&h([]),m(e),o(!a)},I=[E().createElement(he.DropdownItem,{key:"action",component:"button",onClick:function(){return j(Q.Mo)}},"Last 7 Days"),E().createElement(he.DropdownItem,{key:"action",component:"button",onClick:function(){return j(Q.NG)}},"Last 45 Days")];return E().createElement("div",{className:"chartContainer"},v?E().createElement(ge.ub,{className:"loadingErrorContainer",variant:ge.IQ.small},E().createElement(Ee.Dx,{headingLevel:"h2",size:"lg"},"Something went wrong"),E().createElement(ve.B,null,"There was a problem while requesting historical data. Please try again later.")):0===f.length?E().createElement(de.b,{className:"loadingErrorContainer"},E().createElement(we.Spinner,{size:"xl","aria-labelledby":"loading-historical-chart"})):E().createElement(w.Fragment,null,E().createElement("span",{className:"dropdownContainer"},E().createElement(be.Tooltip,{content:E().createElement("div",null,"Scroll and pan to zoom and move")},E().createElement(De.ZP,{size:"sm"})),E().createElement(fe.Dropdown,{className:"dateDropdown",toggle:E().createElement(ye.DropdownToggle,{id:"chart-date-toggle",onToggle:function(e){o(e)},toggleIndicator:Oe.default},"Last ".concat(u===Q.Mo?Q.Mo:Q.zO," Days")),isOpen:a,dropdownItems:I})),E().createElement("div",{style:{height:"275px"}},E().createElement(ce.k,{domain:(D=new Date,S=new Date,P=u===Q.Mo?Q.Mo:Q.NG,{y:[0,100],x:[S=new Date(S.setDate(D.getDate()-P)),D]}),scale:{x:"time",y:"linear"},containerComponent:E().createElement(O,{labels:function(e){var t=e.datum;return t.childName.includes("scatter-")&&null!==t.y?"".concat(t.name,": ").concat(t.y,"%"):null},constrainToVisibleArea:!0,voronoiDimension:"x",zoomDimension:"x"}),legendData:[{name:"CPU Utilization"},{name:"Memory Utilization"}],legendOrientation:"vertical",legendPosition:"right",height:275,width:756,maxDomain:{y:100},minDomain:{y:0},padding:{bottom:50,left:50,right:200,top:50},themeColor:se.nz.blue},E().createElement(le.C,{tickValues:f[0].datapoints.map((function(e){return e.x})),tickFormat:function(e){return(new Date).toDateString()===new Date(e).toDateString()?"Today":"".concat(new Date(e).getDate()," ").concat(Q.gg[new Date(e).getMonth()])},fixLabelOverlap:!0,tickCount:6}),E().createElement(le.C,{dependentAxis:!0,showGrid:!0,tickValues:[0,20,40,60,80,100],tickFormat:function(e){return"".concat(e,"%")}}),E().createElement(ue.G,null,f.map((function(e,t){return E().createElement(me.L,{data:e.datapoints,key:"scatter-"+t,name:"scatter-"+t})}))),E().createElement(ue.G,null,f.map((function(e,t){return E().createElement(pe.m,{key:"line-"+t,name:"line-"+t,data:e.datapoints})})))))))};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}je.propTypes={inventoryId:O().string};var ke=function(e){f()(c,e);var t,n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(n);if(r){var a=v()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return y()(this,e)});function c(e){var t;return u()(this,c),(t=o.call(this,e)).state={inventoryId:t.props.match.params.inventoryId},t}return p()(c,[{key:"componentDidMount",value:(t=s()(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=insights.chrome)||void 0===t||null===(n=t.hideGlobalFilter)||void 0===n||n.call(t,!0),insights.chrome.appAction("system-detail"),e.next=4,this.props.loadSystemInfo(this.state.inventoryId);case 4:document.title=this.props.rosSystemInfo.display_name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderChildrenNode",value:function(){if(this.props.rosSystemInfo){var e=this.props.rosSystemInfo,t=e.cloud_provider,n=e.instance_type,r=e.idling_time,a=e.rating,o=e.state,i=this.props.match.params.inventoryId;return E().createElement(P.r,{className:"ros-system-info"},E().createElement(j.P,null,E().createElement(ne.o,{className:"expanded-row",isCompact:!0,isHorizontal:!0},E().createElement(ae.g,null,E().createElement(re.M,null,"State"),E().createElement(oe.b,null,E().createElement(X.l,{stateValue:o}))))),E().createElement(j.P,null,E().createElement(G.v,{cloudProvider:t,instanceType:n,idlingTime:r,inventoryId:i})),E().createElement(j.P,null,E().createElement(K,{system:_e({},{rating:a,inventoryId:i})})))}return null}},{key:"render",value:function(){var e=this,t=this.props.entity,n=this.props.match.params.inventoryId;return E().createElement(E().Fragment,null,E().createElement(te.B.Consumer,null,(function(r){return!1===r.permissions.systemsRead?E().createElement(ee.Z,{serviceName:"Resource Optimization"}):E().createElement(R.Z,{onLoad:function(e){var t=e.mergeWithDetail,n=e.INVENTORY_ACTION_TYPES;(0,N.z2)(t(function(e){var t=e.LOAD_ENTITY_FULFILLED;return(0,L.Gg)(a()({},t,Z),A)}(n)))},className:"rosDetailWrapper"},E().createElement(x.Z,null,E().createElement(I.a,{ouiaId:"system-detail"},E().createElement(_.g,null,E().createElement(D.Link,{to:"/"},"Resource Optimization")),E().createElement(_.g,{isActive:!0},E().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},t?t.display_name:null))),E().createElement("div",{className:"detail-header-container"},E().createElement(C.Z,{hideBack:!0,showDelete:!1,hideInvDrawer:!0}),e.renderChildrenNode(),E().createElement(je,{inventoryId:n}))),E().createElement(k.Z,null,E().createElement(P.r,{gutter:"md"},E().createElement(j.P,{span:12},E().createElement(z.Z,{showTags:!0,fallback:""})))))})))}}]),c}(E().Component);ke.propTypes={match:O().any,entity:O().object,loading:O().bool,rosSystemInfo:O().object,loadSystemInfo:O().func};const xe=(0,D.withRouter)((0,S.$j)((function(e,t){var n,r;return _e({entity:e.entityDetails&&e.entityDetails.entity,loading:null===(n=e.systemDetailReducer)||void 0===n?void 0:n.loading,rosSystemInfo:null===(r=e.systemDetailReducer)||void 0===r?void 0:r.systemInfo},t)}),(function(e){return{loadSystemInfo:function(t){return e((0,T.Of)(t))}}}))(ke))},30859:(e,t,n)=>{"use strict";n.d(t,{jL:()=>f,S7:()=>h,x2:()=>y,lc:()=>g,tp:()=>v});var r=n(87757),a=n.n(r),o=n(48926),i=n.n(o),c=n(59713),s=n.n(c),l=n(88587),u=n(14906);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){if(!e.ok)throw Error(e.statusText);return e}var f=function(){var e=new URL(u.RC+u.LO,window.location.origin);return window.insights.chrome.auth.getUser().then((function(){return fetch(e).then(d).then((function(e){return e.json()})).then((function(e){return e}))}))},h=function(e){var t=new URL(u.RC+u.M4+"/".concat(e),window.location.origin);return window.insights.chrome.auth.getUser().then((function(){return fetch(t).then(d).then((function(e){return e.json()})).then((function(e){return e}))}))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(n=p(p({},n),{},{description:t.description}));var r=new URL(u.RC+u.M4+"/".concat(e,"/suggestions"),window.location.origin);r.search=new URLSearchParams(n).toString();var a=window.insights.chrome.auth.getUser().then((function(){return fetch(r).then((function(e){if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return e}))}));return a},g=function(){var e=i()(a().mark((function e(t){var n,r,o,i,c,s,m,d,f,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return c=(i=t||{}).perPage,s=i.orderBy,m=i.orderHow,d=p(p({order_by:{display_name:"display_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[s]||"report_date",order_how:m||l.SortByDirection.desc,limit:c||-1},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),f=new URL(u.RC+u.M4,window.location.origin),h=new URLSearchParams(d),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){h.append("state",e)})),null==t||null===(o=t.osFilter)||void 0===o||o.forEach((function(e){h.append("os",e)})),f.search=h.toString(),e.abrupt("return",fetch(f).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=new URL("".concat(u.RC).concat(u.M4,"/").concat(e,"/history"),window.location.origin),r=new URLSearchParams({limit:t});return n.search=r.toString(),window.insights.chrome.auth.getUser().then((function(){return fetch(n).then(d).then((function(e){return e.json()})).then((function(e){return e}))}))}},94778:(e,t,n)=>{"use strict";n.d(t,{Of:()=>a,t9:()=>o,Pn:()=>i,zz:()=>c});var r=n(30859),a=function(e){return{type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.S7)(e)}},o=function(e,t){return{type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.x2)(e,t)}},i=function(){return{type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.jL)()}},c=function(e){return{type:"CHANGE_SYSTEM_COLUMNS",payload:e}}},58392:()=>{},81320:()=>{},314:()=>{},72816:()=>{}}]);
//# sourceMappingURL=../sourcemaps/RosSystemDetail.f0b9774a797f3cf665c2e944d7c44b67.js.map