"use strict";(self.webpackChunkros_frontend=self.webpackChunkros_frontend||[]).push([[798],{86503:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(63038),a=n.n(r),o=n(6479),i=n.n(o),c=n(67154),l=n.n(c),s=n(43297),u=n.n(s),m=n(45697),p=n.n(m),f=n(2983),d=n(79943),y=n(55138),h=u().lazy((function(){return Promise.all([n.e(939),n.e(549),n.e(52),n.e(192),n.e(632),n.e(25),n.e(523)]).then(n.bind(n,88422))})),g=function(e){var t=(0,f.v9)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id}));return u().createElement(s.Suspense,{fallback:""},u().createElement(h,l()({inventoryId:t},e)))},v=function(e){var t=e.getRegistry,n=i()(e,["getRegistry"]),r=(0,s.useState)(),o=a()(r,2),c=o[0],l=o[1];return(0,s.useEffect)((function(){var e,n;t&&(null===(e=t())||void 0===e||null===(n=e.register)||void 0===n||n.call(e,{systemRecsReducer:d.rj})),l((function(){return t?f.zt:s.Fragment}))}),[t]),c?u().createElement(c,t&&{store:t().getStore()},u().createElement(g,n)):u().createElement(y.Bullseye,null,u().createElement(y.Spinner,{size:"xl"}))};v.propTypes={getRegistry:p().func};const E=v},6997:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ge});var r=n(67154),a=n.n(r),o=n(59713),i=n.n(o),c=n(34575),l=n.n(c),s=n(93913),u=n.n(s),m=n(2205),p=n.n(m),f=n(78585),d=n.n(f),y=n(29754),h=n.n(y),g=n(43297),v=n.n(g),E=n(45697),w=n.n(E),b=n(16530),D=n(2983),O=n(55138),S=n(14748),I=n(80123),P=n(38775),_=n(53895),j=n(30319),x=n(94778),k=n(18546);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={loaded:!1},L=function(e){return T(T({},e),{},{loaded:!0})},z=n(24814),N=n(87757),F=n.n(N),M=n(48926),U=n.n(M),B=n(63038),G=n.n(B),Z=n(11239),A=n(49580),V=n(61088),Y=n(90502),H=n(58061),J=function(e){var t=e.system,n=(0,g.useState)(t.rating),r=G()(n,2),a=r[0],o=r[1],i=(0,g.useState)(!1),c=G()(i,2),l=c[0],s=c[1],u=function(){var e=U()(F().mark((function e(n){var r,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a===n?H.nV:n,e.prev=1,i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventory_id:t.inventoryId,rating:r})},e.next=5,fetch("".concat(H.RC).concat(H.Up),i);case 5:o(r),s(!0),setTimeout((function(){return s(!1)}),3e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return v().createElement("span",{className:"ratingSpanOverride"},"Is this suggestion helpful?",v().createElement(O.Button,{variant:"plain","aria-label":"thumbs-up",onClick:function(){return u(H.xP)},ouiaId:"thumbsUp"},a===H.xP?v().createElement(V.ZP,{className:"like",size:"sm"}):v().createElement(Z.ZP,{size:"sm"})),v().createElement(O.Button,{variant:"plain","aria-label":"thumbs-down",onClick:function(){return u(H.RM)},ouiaId:"thumbsDown"},a===H.RM?v().createElement(Y.ZP,{className:"dislike",size:"sm"}):v().createElement(A.ZP,{size:"sm"})),l&&"Thank you for your feedback!")};J.propTypes={system:w().object};const W=J;var q=n(36269),Q=n(85333),$=n(87999),K=n(77938),X=n(81809),ee=n(24045),te=n(7716),ne=n(10310),re=n(40621),ae=n(2370),oe=n(26383),ie=n(66207),ce=n(23310),le=n(96466),se=n(55795),ue=n(30859),me=function(e,t){var n=[],r=new Date,a={datapoints:[]},o={datapoints:[]},i=new Map;e.reverse().forEach((function(e){i.set(new Date(e.report_date).toDateString(),e)}));for(var c=t-1;c>=0;c--){var l=new Date;l=new Date(l.setDate(r.getDate()-c)).toDateString(),i.has(l)?(a.datapoints.push({name:"CPU Utilization",x:new Date(l),y:i.get(l).cpu}),o.datapoints.push({name:"Memory Utilization",x:new Date(l),y:i.get(l).memory})):(a.datapoints.push({name:"CPU Utilization",x:new Date(l),y:null}),o.datapoints.push({name:"Memory Utilization",x:new Date(l),y:null}))}return n.push(a),n.push(o),n},pe=function(e){var t=e.inventoryId,n=(0,g.useState)(!1),r=G()(n,2),a=r[0],o=r[1],i=(0,g.useState)(H.Mo),c=G()(i,2),l=c[0],s=c[1],u=(0,g.useState)([]),m=G()(u,2),p=m[0],f=m[1],d=(0,g.useState)(!1),y=G()(d,2),h=y[0],E=y[1],w=(0,X.f)("zoom","voronoi");(0,g.useEffect)((function(){function e(){return(e=U()(F().mark((function e(){var n,r,a;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=l===H.Mo?H.Mo:H.zO,e.next=4,(0,ue.tp)(t,n);case 4:r=e.sent,a=me(r.data,l),f(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),E(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}f([]),function(){e.apply(this,arguments)}()}),[l]);var b,D,S,I=function(e){e!==l&&f([]),s(e),o(!a)},P=[v().createElement(O.DropdownItem,{key:"action_7",component:"button",onClick:function(){return I(H.Mo)}},"Last 7 Days"),v().createElement(O.DropdownItem,{key:"action_45",component:"button",onClick:function(){return I(H.NG)}},"Last 45 Days")];return h?v().createElement(O.FlexItem,{alignSelf:{default:"alignSelfBaseline"}},v().createElement(O.EmptyState,{variant:O.EmptyStateVariant.small},v().createElement(O.Title,{headingLevel:"h2",size:"lg"},"Something went wrong"),v().createElement(O.EmptyStateBody,null,"There was a problem while requesting historical data. Please try again later."))):0===p.length?v().createElement(O.FlexItem,{alignSelf:{default:"alignSelfBaseline"}},v().createElement(O.Bullseye,null,v().createElement(O.Spinner,{size:"xl","aria-labelledby":"loading-historical-chart"}))):v().createElement(O.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfBaseline"},align:{default:"alignRight"}},v().createElement(O.FlexItem,{align:{default:"alignRight"}},v().createElement("div",{className:"chartDateFilter"},v().createElement(O.Tooltip,{content:v().createElement("div",null,"Scroll and pan to zoom and move")},v().createElement(se.ZP,{size:"sm"})),v().createElement(O.Dropdown,{className:"dateDropdown",toggle:v().createElement(O.DropdownToggle,{id:"chart-date-toggle",onToggle:function(e){o(e)},toggleIndicator:le.ZP},"Last ".concat(l===H.Mo?H.Mo:H.zO," Days")),isOpen:a,dropdownItems:P}))),v().createElement(O.FlexItem,{align:{default:"alignRight"},className:"historical-chart-panel"},v().createElement(ee.k,{domain:(b=new Date,D=new Date,S=l===H.Mo?H.Mo:H.NG,{y:[0,100],x:[D=new Date(D.setDate(b.getDate()-S)),b]}),scale:{x:"time",y:"linear"},containerComponent:v().createElement(w,{labels:function(e){return t=e.datum,n=new Date(t.x),r=(new Date).toDateString()===n.toDateString()?"Today":"".concat(n.getDate()," ").concat(H.gg[n.getMonth()]),r=t.name.includes("CPU")?"".concat(r,"\n   \n"):"",t.childName.includes("scatter-")&&null!==t.y?"".concat(r).concat(t.name,": ").concat(t.y,"%"):null;var t,n,r},labelComponent:v().createElement(te.L,{labelComponent:v().createElement(ne.Df,{style:[{fill:"white",fontSize:16,fontWeight:700},{fill:"white"},{fill:"white"},{fill:"white"}]})}),constrainToVisibleArea:!0,voronoiDimension:"x",zoomDimension:"x"}),legendData:[{name:"CPU Utilization"},{name:"Memory Utilization"}],legendOrientation:"vertical",legendPosition:"right",height:275,width:756,maxDomain:{y:100},minDomain:{y:0},padding:{bottom:50,left:50,right:165,top:50},themeColor:re.nz.blue},v().createElement(ae.C,{tickValues:p[0].datapoints.map((function(e){return e.x})),tickFormat:function(e){return(new Date).toDateString()===new Date(e).toDateString()?"Today":"".concat(new Date(e).getDate()," ").concat(H.gg[new Date(e).getMonth()])},fixLabelOverlap:!0,tickCount:6}),v().createElement(ae.C,{dependentAxis:!0,showGrid:!0,tickValues:[0,20,40,60,80,100],tickFormat:function(e){return"".concat(e,"%")}}),v().createElement(oe.G,null,p.map((function(e,t){return v().createElement(ie.L,{data:e.datapoints,key:"scatter-"+t,name:"scatter-"+t})}))),v().createElement(oe.G,null,p.map((function(e,t){return v().createElement(ce.m,{key:"line-"+t,name:"line-"+t,data:e.datapoints})}))))))};pe.propTypes={inventoryId:w().string};var fe=n(86503),de=n(55140);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=function(e){p()(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h()(t);if(n){var a=h()(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return d()(this,e)});function a(e){var t;return l()(this,a),(t=r.call(this,e)).state={inventoryId:t.props.match.params.inventoryId},t}return u()(a,[{key:"componentDidMount",value:function(){var e,t=this.props.chrome;null==t||null===(e=t.hideGlobalFilter)||void 0===e||e.call(t,!0),t.appAction("system-detail"),this.props.loadSystemInfo(this.state.inventoryId)}},{key:"componentDidUpdate",value:function(){var e=this.props.chrome,t=this.props.rosSystemInfo.display_name;t&&t!==document.title&&(null==e||e.updateDocumentTitle(t))}},{key:"renderChildrenNode",value:function(){if(this.props.rosSystemInfo){var e=this.props.rosSystemInfo,t=e.cloud_provider,n=e.instance_type,r=e.idling_time,a=e.report_date,o=e.rating,i=e.state,c=this.props.match.params.inventoryId;return v().createElement(O.Flex,{alignItems:{default:"alignItemsCenter"}},v().createElement(O.Flex,{grow:{default:"grow"},className:"ros-system-info"},v().createElement(O.Flex,{flex:{default:"flex_4"},direction:{default:"column"}},v().createElement(O.FlexItem,null,v().createElement(O.DescriptionList,{className:"expanded-row",isCompact:!0,isHorizontal:!0},v().createElement(O.DescriptionListGroup,null,v().createElement(O.DescriptionListTerm,null,"Last reported"),v().createElement(O.DescriptionListDescription,null,(0,K.hb)(a))),v().createElement(O.DescriptionListGroup,null,v().createElement(O.DescriptionListTerm,null,"State"),v().createElement(O.DescriptionListDescription,null,v().createElement(q.l,{stateValue:i})))),v().createElement(z.v,{cloudProvider:t,instanceType:n,idlingTime:r,inventoryId:c}),v().createElement(W,{system:{rating:o,inventoryId:c}}))),v().createElement(O.Flex,{grow:{default:"grow"},direction:{default:"column"}},v().createElement(pe,{inventoryId:c}))))}return null}},{key:"render",value:function(){var e=this,t=this.props.entity;return v().createElement(v().Fragment,null,v().createElement($.B.Consumer,null,(function(n){return!1===n.permissions.hasRead?v().createElement(Q.Z,{serviceName:H.m_}):v().createElement(P.Z,{inventoryId:e.state.inventoryId,onLoad:function(e){var t=e.mergeWithDetail,n=e.INVENTORY_ACTION_TYPES;(0,j.z2)(t(function(e){var t=e.LOAD_ENTITY_FULFILLED;return(0,k.Gg)(i()({},t,L),C)}(n)))},className:"rosDetailWrapper"},v().createElement(I.Z,null,v().createElement(O.Breadcrumb,{ouiaId:"system-detail"},v().createElement(O.BreadcrumbItem,null,v().createElement(b.Link,{to:"/"},"Resource Optimization")),v().createElement(O.BreadcrumbItem,{isActive:!0},v().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},t?t.display_name:null))),v().createElement(O.Stack,{hasGutter:!0},v().createElement(O.StackItem,null,v().createElement(_.Z,{hideBack:!0,showDelete:!1,hideInvDrawer:!0,className:"rosDetailsHead"})),v().createElement(O.StackItem,{isFilled:!0},e.renderChildrenNode()))),v().createElement(S.Z,null,v().createElement(O.Grid,{gutter:"md"},v().createElement(O.GridItem,{span:12},t?v().createElement(fe.default,{showTags:!0,fallback:""}):v().createElement(O.Spinner,null)))))})))}}]),a}(v().Component);he.propTypes={match:w().any,entity:w().object,loading:w().bool,rosSystemInfo:w().object,loadSystemInfo:w().func,chrome:w().object};const ge=(0,b.withRouter)((0,D.$j)((function(e,t){var n,r;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({entity:e.entityDetails&&e.entityDetails.entity,loading:null===(n=e.systemDetailReducer)||void 0===n?void 0:n.loading,rosSystemInfo:null===(r=e.systemDetailReducer)||void 0===r?void 0:r.systemInfo},t)}),(function(e){return{loadSystemInfo:function(t){return e((0,x.Of)(t))}}}))((function(e){var t=(0,de.Z)();return v().createElement(he,a()({},e,{chrome:t}))})))},30859:(e,t,n)=>{n.d(t,{Q5:()=>E,S7:()=>y,Up:()=>w,jL:()=>d,lc:()=>g,tp:()=>v,x2:()=>h});var r=n(87757),a=n.n(r),o=n(48926),i=n.n(o),c=n(59713),l=n.n(c),s=n(68770),u=n(58061);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){if(!e.ok)throw Error(e.statusText);return e}var d=function(){var e=new URL(u.RC+u.LO,window.location.origin);return fetch(e).then(f).then((function(e){return e.json()})).then((function(e){return e}))},y=function(e){var t=new URL(u.RC+u.M4+"/".concat(e),window.location.origin);return fetch(t).then(f).then((function(e){return e.json()})).then((function(e){return e}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(n=p(p({},n),{},{description:t.description}));var r=new URL(u.RC+u.M4+"/".concat(e,"/suggestions"),window.location.origin);return r.search=new URLSearchParams(n).toString(),fetch(r).then((function(e){if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return e}))},g=function(){var e=i()(a().mark((function e(t){var n,r,o,i,c,l,m,f,d,y,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=(c=t||{}).perPage,m=c.orderBy,f=c.orderHow,d=p(p({order_by:{display_name:"display_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[m]||"report_date",order_how:f||s.SortByDirection.desc,limit:l||-1},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),y=new URL(u.RC+u.M4,window.location.origin),h=new URLSearchParams(d),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){h.append("state",e)})),null==t||null===(o=t.osFilter)||void 0===o||o.forEach((function(e){h.append("os",e)})),null==t||null===(i=t.groupFilter)||void 0===i||i.forEach((function(e){h.append("group_name",e)})),y.search=h.toString(),e.abrupt("return",fetch(y).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=new URL("".concat(u.RC).concat(u.M4,"/").concat(e,"/history"),window.location.origin),r=new URLSearchParams({limit:t});return n.search=r.toString(),fetch(n).then(f).then((function(e){return e.json()})).then((function(e){return e}))},E=function(){var e=i()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(u.t5,window.location.origin),e.abrupt("return",fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"executiveReport"})}).then(f).then((function(e){return e.blob()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=i()(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(u.t5,window.location.origin),e.abrupt("return",fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"systemsReport",params:{display_name:null==t?void 0:t.filters.hostnameOrId,state:null==t?void 0:t.stateFilter,os:null==t?void 0:t.osFilter}})}).then(f).then((function(e){return e.blob()})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},94778:(e,t,n)=>{n.d(t,{Of:()=>a,Pn:()=>i,t9:()=>o,zz:()=>c});var r=n(30859),a=function(e){return{type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.S7)(e)}},o=function(e,t){return{type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.x2)(e,t)}},i=function(){return{type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.jL)()}},c=function(e){return{type:"CHANGE_SYSTEM_COLUMNS",payload:e}}}}]);
//# sourceMappingURL=../sourcemaps/RosSystemDetail.7432eb4cd17f9230fbafed82b2f19499.js.map