(self.webpackChunkros=self.webpackChunkros||[]).push([[6008],{54128:(e,t,a)=>{var n=a(31800),r=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(r,""):e}},31800:e=>{var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},38221:(e,t,a)=>{var n=a(23805),r=a(10124),i=a(99374),o=Math.max,s=Math.min;e.exports=function(e,t,a){var l,c,p,u,d,h,m=0,g=!1,y=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var a=l,n=c;return l=c=void 0,m=t,u=e.apply(n,a)}function S(e){var a=e-h;return void 0===h||a>=t||a<0||y&&e-m>=p}function b(){var e=r();if(S(e))return _(e);d=setTimeout(b,function(e){var a=t-(e-h);return y?s(a,p-(e-m)):a}(e))}function _(e){return d=void 0,f&&l?v(e):(l=c=void 0,u)}function w(){var e=r(),a=S(e);if(l=arguments,c=this,h=e,a){if(void 0===d)return function(e){return m=e,d=setTimeout(b,t),g?v(e):u}(h);if(y)return clearTimeout(d),d=setTimeout(b,t),v(h)}return void 0===d&&(d=setTimeout(b,t)),u}return t=i(t)||0,n(a)&&(g=!!a.leading,p=(y="maxWait"in a)?o(i(a.maxWait)||0,t):p,f="trailing"in a?!!a.trailing:f),w.cancel=function(){void 0!==d&&clearTimeout(d),m=0,l=h=c=d=void 0},w.flush=function(){return void 0===d?u:_(r())},w}},10124:(e,t,a)=>{var n=a(9325);e.exports=function(){return n.Date.now()}},99374:(e,t,a)=>{var n=a(54128),r=a(23805),i=a(44394),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var a=s.test(e);return a||l.test(e)?c(e.slice(2),a?2:8):o.test(e)?NaN:+e}},49549:(e,t,a)=>{"use strict";a.d(t,{V:()=>c});var n=a(44914),r=a.n(n),i=a(41901),o=a(65769),s=a(37560),l=a(7769);const c=()=>r().createElement(n.Suspense,{fallback:r().createElement(i.Bullseye,null,r().createElement(o.Spinner,null))},r().createElement(s.A,{appId:"ros_zero_state",appName:"dashboard",module:"./AppZeroState",scope:"dashboard",ErrorComponent:r().createElement(l.A,null),app:"Resource_Optimization"}))},4166:(e,t,a)=>{"use strict";a.r(t),a.d(t,{constructActiveFilters:()=>C,default:()=>j,isEmptyFilters:()=>F,onDeleteFilter:()=>x});var n=a(44914),r=a.n(n),i=a(5556),o=a.n(i),s=a(48900),l=a(42158),c=a(74848),p=a(91176),u=a(69),d=a(32485),h=a.n(d),m=function(){return m=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},m.apply(this,arguments)};function g(e){return"".concat(e,e>1||e<1?" Results":" Result")}const y=function(e){var t,a=e.isFooter,r=void 0!==a&&a,i=e.results,o=e.className,s=e.selected,l=e.children,d=e.ouiaId,y=e.ouiaSafe,f=void 0===y||y,v=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["isFooter","results","className","selected","children","ouiaId","ouiaSafe"]),S=h()("ins-c-table__toolbar",((t={})["ins-m-footer"]=r,t),o),b="RHI/TableToolbar",_=(0,u.useOUIAId)(b,d,f);return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(p.Toolbar,m({className:S,"data-ouia-component-type":b,"data-ouia-component-id":_,"data-ouia-safe":f},v,{children:l})),(i&&i>=0||s&&s>=0)&&(0,c.jsxs)("div",{className:"ins-c-table__toolbar-results",children:[i&&i>=0&&(0,c.jsxs)("span",{className:"ins-c-table__toolbar-results-count",children:[" ",g(i)," "]}),s&&s>=0&&(0,c.jsxs)("span",{className:"ins-c-table__toolbar-results-selected",children:[" ",s," Selected "]})]})]})};var f=a(49549),v=a(41526),S=a(16477),b=a(22181),_=a(25847),w=a(87577),E=a(38221),P=a.n(E),R=a(81538);const O=r().lazy((()=>Promise.all([a.e(2543),a.e(9461),a.e(1859),a.e(7544)]).then(a.bind(a,87544)))),T={name:{label:"Name",value:""}},F=e=>Object.values(e).find((e=>e?.value?.length>0||e?.length>0)),C=e=>Object.entries(e).map((([e,{label:t,value:a}={}])=>({category:t,chipKey:e,chips:a?.length>0?Array.isArray(a)?a.map((e=>({name:e}))):[{name:a}]:[]}))),x=(e,t)=>{const a=t[0];return{...e,[a?.chipKey]:{...e[a?.chipKey]||{},value:Array.isArray(e[a?.chipKey]?.value)?e[a?.chipKey]?.value?.filter((e=>!a?.chips?.find((({name:t})=>t===e)))):""}}};class N extends r().Component{constructor(e){super(e),this.state={page:R.KL,perPage:R.EK,inventoryId:e.inventoryId,activeFilters:T},this.debouncedThrottleHandleChange=P()(this.throttleHandleChange.bind(this),800)}async componentDidMount(){await this.requestLoadSysRecs()}async throttleHandleChange(e){await this.requestLoadSysRecs(e)}async requestLoadSysRecs(e={}){const t={page:this.state.page,perPage:this.state.perPage,description:this.state?.descriptionFilter,...e};await this.props.loadSysRecs(this.state.inventoryId,t)}applyFilters(e){this.setState({activeFilters:e,descriptionFilter:e?.name?.value,page:R.KL}),this.debouncedThrottleHandleChange({description:e?.name?.value,page:R.KL})}async updatePagination(e){this.setState(e),await this.requestLoadSysRecs(e)}render(){const{totalRecs:e,recsData:t,emptyState:a}=this.props,{page:i,perPage:o}=this.state;return a?r().createElement(f.V,null):r().createElement(n.Suspense,{fallback:""},r().createElement(_.Stack,{hasGutter:!0},r().createElement(_.StackItem,null,r().createElement(b.Title,{headingLevel:"h3",size:"2xl"},"Suggestions")),r().createElement(_.StackItem,null,r().createElement(S.Card,null,r().createElement(S.CardBody,null,r().createElement(l.A,{className:"ros-primary-toolbar",pagination:{page:0===e?0:i,perPage:o,itemCount:e||0,onSetPage:(e,t)=>this.updatePagination({page:t,perPage:this.state.perPage}),onPerPageSelect:(e,t)=>this.updatePagination({page:R.KL,perPage:t}),isCompact:!0,widgetId:"ros-pagination-top"},filterConfig:{items:[{label:T.name.label,type:"text",filterValues:{key:"text-filter",onChange:(e,t)=>{const a={...this.state.activeFilters,name:{...this.state.activeFilters?.name||{},value:t}};this.applyFilters(a)},value:this.state.activeFilters?.name?.value||"",placeholder:"Filter by name"}}]},activeFiltersConfig:{filters:F(this.state.activeFilters)?C(this.state.activeFilters):[],onDelete:(e,t,a)=>{if(a)this.applyFilters(T);else{const e=x(this.state.activeFilters,t);this.applyFilters(e)}}}}),this.props.loading?null:r().createElement(O,{recommendations:t}),r().createElement(y,null,r().createElement(w.Pagination,{itemCount:e||0,widgetId:"ros-pagination-bottom",page:0===e?0:i,perPage:o,variant:"bottom",onSetPage:(e,t)=>this.updatePagination({page:t,perPage:this.state.perPage}),onPerPageSelect:(e,t)=>this.updatePagination({page:R.KL,perPage:t})})))))))}}N.propTypes={inventoryId:o().string,loading:o().bool,recsData:o().array,totalRecs:o().number,loadSysRecs:o().func,emptyState:o().bool};const j=(0,s.Ng)(((e,t)=>({loading:e.systemRecsReducer?.loading,recsData:e.systemRecsReducer?.recommendationsData,totalRecs:e.systemRecsReducer?.totalRecommendations,emptyState:e.systemRecsReducer?.emptyState,...t})),(function(e){return{loadSysRecs:(t,a={})=>e((0,v.ds)(t,a))}}))(N)},13460:(e,t,a)=>{"use strict";a.d(t,{BA:()=>u,DE:()=>s,c:()=>d,ne:()=>o,yj:()=>l,yz:()=>p,zu:()=>c});var n=a(85736),r=a(81538);function i(e){if(!e.ok)throw Error(e.statusText);return e}const o=()=>{let e=new URL(r.ZA+r.Vg,window.location.origin);return fetch(e).then(i).then((e=>e.json())).then((e=>e))},s=e=>{let t=new URL(r.ZA+r.jC+`/${e}`,window.location.origin);return fetch(t).then(i).then((e=>e.json())).then((e=>e))},l=(e,t={})=>{let a={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(a={...a,description:t.description});let n=new URL(r.ZA+r.jC+`/${e}/suggestions`,window.location.origin);return n.search=new URLSearchParams(a).toString(),fetch(n).then((e=>{if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((e=>e))},c=async e=>{const{perPage:t,orderBy:a,orderHow:i}=e||{};let o={order_by:{display_name:"display_name",groups:"group_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[a]||"report_date",order_how:i||n.l.desc,limit:t||-1,...e?.page&&{offset:(e.page-1)*e.perPage},...e?.filters?.hostnameOrId&&{display_name:e.filters.hostnameOrId}},s=new URL(r.ZA+r.jC,window.location.origin),l=new URLSearchParams(o);return e?.stateFilter?.forEach((e=>{l.append("state",e)})),e?.osFilter?.forEach((e=>{l.append("os",e)})),e?.groupFilter?.forEach((e=>{l.append("group_name",e)})),s.search=l.toString(),fetch(s).then((e=>{if(!e.ok)throw Error(e.statusText);return e})).then((e=>e.json()))},p=(e,t)=>{let a=new URL(`${r.ZA}${r.jC}/${e}/history`,window.location.origin),n=new URLSearchParams({limit:t});return a.search=n.toString(),fetch(a).then(i).then((e=>e.json())).then((e=>e))},u=async()=>{const e=new URL(r.X9,window.location.origin);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"executiveReport"})}).then(i).then((e=>e.blob()))},d=async e=>{const{page:t,perPage:a,activeSortColumnKey:n,activeSortDirection:o}=e||{};let s=new URL(r.ZA+r.XQ,window.location.origin),l={page:t,per_page:a,order_by:n,order_how:o,...e?.instanceTypeName&&{instance_type:e.instanceTypeName}},c=new URLSearchParams(l);return s.search=c.toString(),fetch(s).then(i).then((e=>e.json())).then((e=>e))}},41526:(e,t,a)=>{"use strict";a.d(t,{NI:()=>o,RZ:()=>s,ds:()=>i,iS:()=>l,kZ:()=>r});var n=a(13460);const r=e=>({type:"LOAD_ROS_SYSTEM_INFO",payload:(0,n.DE)(e)}),i=(e,t)=>({type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,n.yj)(e,t)}),o=()=>({type:"LOAD_IS_CONFIGURED_INFO",payload:(0,n.ne)()}),s=e=>({type:"CHANGE_SYSTEM_COLUMNS",payload:e}),l=e=>({type:"LOAD_SUGGESTED_INSTANCE_TYPES",payload:(0,n.c)(e)})},74778:()=>{},82804:()=>{}}]);
//# sourceMappingURL=../sourcemaps/6008.ba0a96e9e6c2edbf45289a967dd9e3ad.js.map