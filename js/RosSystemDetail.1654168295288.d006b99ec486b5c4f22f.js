"use strict";(self.webpackChunkros_frontend=self.webpackChunkros_frontend||[]).push([[798],{86503:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(63038),o=n.n(r),a=n(6479),i=n.n(a),c=n(67154),s=n.n(c),l=n(43297),u=n.n(l),m=n(45697),p=n.n(m),d=n(2983),f=n(79943),h=n(45103),y=u().lazy((function(){return Promise.all([n.e(939),n.e(192),n.e(91),n.e(671),n.e(632),n.e(837)]).then(n.bind(n,88422))})),g=function(e){var t=(0,d.v9)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id}));return u().createElement(l.Suspense,{fallback:""},u().createElement(y,s()({inventoryId:t},e)))},v=function(e){var t=e.getRegistry,n=i()(e,["getRegistry"]),r=(0,l.useState)(),a=o()(r,2),c=a[0],s=a[1];return(0,l.useEffect)((function(){var e,n;t&&(null===(e=t())||void 0===e||null===(n=e.register)||void 0===n||n.call(e,{systemRecsReducer:f.rj})),s((function(){return t?d.zt:l.Fragment}))}),[t]),c?u().createElement(c,t&&{store:t().getStore()},u().createElement(g,n)):u().createElement(h.Bullseye,null,u().createElement(h.Spinner,{size:"xl"}))};v.propTypes={getRegistry:p().func};const w=v},6997:(e,t,n)=>{n.r(t),n.d(t,{default:()=>de});var r=n(59713),o=n.n(r),a=n(87757),i=n.n(a),c=n(48926),s=n.n(c),l=n(34575),u=n.n(l),m=n(93913),p=n.n(m),d=n(2205),f=n.n(d),h=n(78585),y=n.n(h),g=n(29754),v=n.n(g),w=n(43297),E=n.n(w),b=n(45697),O=n.n(b),D=n(16530),S=n(2983),P=n(45103),I=n(14748),j=n(80123),k=n(38775),_=n(53895),x=n(33902),R=n(30319),C=n(94778),T=n(18546),z=n(86503);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={loaded:!1},M=function(e){return N(N({},e),{},{loaded:!0,activeApps:[{title:"Resource optimization",name:"resource optimization",component:z.default}]})},G=n(24814),F=n(63038),B=n.n(F),Z=n(11239),A=n(49580),V=n(61088),Y=n(90502),H=n(14906),W=function(e){var t=e.system,n=(0,w.useState)(t.rating),r=B()(n,2),o=r[0],a=r[1],c=(0,w.useState)(!1),l=B()(c,2),u=l[0],m=l[1],p=function(){var e=s()(i().mark((function e(n){var r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o===n?H.nV:n,e.prev=1,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventory_id:t.inventoryId,rating:r})},e.next=5,fetch("".concat(H.RC).concat(H.Up),c);case 5:a(r),m(!0),setTimeout((function(){return m(!1)}),3e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return E().createElement("span",{className:"ratingSpanOverride"},"Is this suggestion helpful?",E().createElement(P.Button,{variant:"plain","aria-label":"thumbs-up",onClick:function(){return p(H.xP)},ouiaId:"thumbsUp"},o===H.xP?E().createElement(V.ZP,{className:"like",size:"sm"}):E().createElement(Z.ZP,{size:"sm"})),E().createElement(P.Button,{variant:"plain","aria-label":"thumbs-down",onClick:function(){return p(H.RM)},ouiaId:"thumbsDown"},o===H.RM?E().createElement(Y.ZP,{className:"dislike",size:"sm"}):E().createElement(A.ZP,{size:"sm"})),u&&"Thank you for your feedback!")};W.propTypes={system:O().object};const q=W;var J=n(36269),Q=n(85333),$=n(87999),K=n(7805),X=n(32576),ee=n(40621),te=n(2370),ne=n(26383),re=n(66207),oe=n(74174),ae=n(96466),ie=n(55795),ce=n(30859),se=function(e,t){var n=[],r=new Date,o={datapoints:[]},a={datapoints:[]},i=new Map;e.reverse().forEach((function(e){i.set(new Date(e.report_date).toDateString(),e)}));for(var c=t-1;c>=0;c--){var s=new Date;s=new Date(s.setDate(r.getDate()-c)).toDateString(),i.has(s)?(o.datapoints.push({name:"CPU Utilization",x:new Date(s),y:i.get(s).cpu}),a.datapoints.push({name:"Memory Utilization",x:new Date(s),y:i.get(s).memory})):(o.datapoints.push({name:"CPU Utilization",x:new Date(s),y:null}),a.datapoints.push({name:"Memory Utilization",x:new Date(s),y:null}))}return n.push(o),n.push(a),n},le=function(e){var t=e.inventoryId,n=(0,w.useState)(!1),r=B()(n,2),o=r[0],a=r[1],c=(0,w.useState)(H.Mo),l=B()(c,2),u=l[0],m=l[1],p=(0,w.useState)([]),d=B()(p,2),f=d[0],h=d[1],y=(0,w.useState)(!1),g=B()(y,2),v=g[0],b=g[1],O=(0,K.f)("zoom","voronoi");(0,w.useEffect)((function(){function e(){return(e=s()(i().mark((function e(){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=u===H.Mo?H.Mo:H.zO,e.next=4,(0,ce.tp)(t,n);case 4:r=e.sent,o=se(r.data,u),h(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}h([]),function(){e.apply(this,arguments)}()}),[u]);var D,S,I,j=function(e){e!==u&&h([]),m(e),a(!o)},k=[E().createElement(P.DropdownItem,{key:"action",component:"button",onClick:function(){return j(H.Mo)}},"Last 7 Days"),E().createElement(P.DropdownItem,{key:"action",component:"button",onClick:function(){return j(H.NG)}},"Last 45 Days")];return E().createElement("div",{className:"chartContainer"},v?E().createElement(P.EmptyState,{className:"loadingErrorContainer",variant:P.EmptyStateVariant.small},E().createElement(P.Title,{headingLevel:"h2",size:"lg"},"Something went wrong"),E().createElement(P.EmptyStateBody,null,"There was a problem while requesting historical data. Please try again later.")):0===f.length?E().createElement(P.Bullseye,{className:"loadingErrorContainer"},E().createElement(P.Spinner,{size:"xl","aria-labelledby":"loading-historical-chart"})):E().createElement(w.Fragment,null,E().createElement("span",{className:"dropdownContainer"},E().createElement(P.Tooltip,{content:E().createElement("div",null,"Scroll and pan to zoom and move")},E().createElement(ie.ZP,{size:"sm"})),E().createElement(P.Dropdown,{className:"dateDropdown",toggle:E().createElement(P.DropdownToggle,{id:"chart-date-toggle",onToggle:function(e){a(e)},toggleIndicator:ae.ZP},"Last ".concat(u===H.Mo?H.Mo:H.zO," Days")),isOpen:o,dropdownItems:k})),E().createElement("div",{style:{height:"275px"}},E().createElement(X.k,{domain:(D=new Date,S=new Date,I=u===H.Mo?H.Mo:H.NG,{y:[0,100],x:[S=new Date(S.setDate(D.getDate()-I)),D]}),scale:{x:"time",y:"linear"},containerComponent:E().createElement(O,{labels:function(e){var t=e.datum;return t.childName.includes("scatter-")&&null!==t.y?"".concat(t.name,": ").concat(t.y,"%"):null},constrainToVisibleArea:!0,voronoiDimension:"x",zoomDimension:"x"}),legendData:[{name:"CPU Utilization"},{name:"Memory Utilization"}],legendOrientation:"vertical",legendPosition:"right",height:275,width:756,maxDomain:{y:100},minDomain:{y:0},padding:{bottom:50,left:50,right:200,top:50},themeColor:ee.nz.blue},E().createElement(te.C,{tickValues:f[0].datapoints.map((function(e){return e.x})),tickFormat:function(e){return(new Date).toDateString()===new Date(e).toDateString()?"Today":"".concat(new Date(e).getDate()," ").concat(H.gg[new Date(e).getMonth()])},fixLabelOverlap:!0,tickCount:6}),E().createElement(te.C,{dependentAxis:!0,showGrid:!0,tickValues:[0,20,40,60,80,100],tickFormat:function(e){return"".concat(e,"%")}}),E().createElement(ne.G,null,f.map((function(e,t){return E().createElement(re.L,{data:e.datapoints,key:"scatter-"+t,name:"scatter-"+t})}))),E().createElement(ne.G,null,f.map((function(e,t){return E().createElement(oe.m,{key:"line-"+t,name:"line-"+t,data:e.datapoints})})))))))};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}le.propTypes={inventoryId:O().string};var pe=function(e){f()(c,e);var t,n,r,a=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(n);if(r){var o=v()(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return y()(this,e)});function c(e){var t;return u()(this,c),(t=a.call(this,e)).state={inventoryId:t.props.match.params.inventoryId},t}return p()(c,[{key:"componentDidMount",value:(t=s()(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=insights.chrome)||void 0===t||null===(n=t.hideGlobalFilter)||void 0===n||n.call(t,!0),insights.chrome.appAction("system-detail"),e.next=4,this.props.loadSystemInfo(this.state.inventoryId);case 4:document.title=this.props.rosSystemInfo.display_name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderChildrenNode",value:function(){if(this.props.rosSystemInfo){var e=this.props.rosSystemInfo,t=e.cloud_provider,n=e.instance_type,r=e.idling_time,o=e.rating,a=e.state,i=this.props.match.params.inventoryId;return E().createElement(P.Grid,{className:"ros-system-info"},E().createElement(P.GridItem,null,E().createElement(P.DescriptionList,{className:"expanded-row",isCompact:!0,isHorizontal:!0},E().createElement(P.DescriptionListGroup,null,E().createElement(P.DescriptionListTerm,null,"State"),E().createElement(P.DescriptionListDescription,null,E().createElement(J.l,{stateValue:a}))))),E().createElement(P.GridItem,null,E().createElement(G.v,{cloudProvider:t,instanceType:n,idlingTime:r,inventoryId:i})),E().createElement(P.GridItem,null,E().createElement(q,{system:me({},{rating:o,inventoryId:i})})))}return null}},{key:"render",value:function(){var e=this,t=this.props.entity,n=this.props.match.params.inventoryId;return E().createElement(E().Fragment,null,E().createElement($.B.Consumer,null,(function(r){return!1===r.permissions.systemsRead?E().createElement(Q.Z,{serviceName:"Resource Optimization"}):E().createElement(k.Z,{onLoad:function(e){var t=e.mergeWithDetail,n=e.INVENTORY_ACTION_TYPES;(0,R.z2)(t(function(e){var t=e.LOAD_ENTITY_FULFILLED;return(0,T.Gg)(o()({},t,M),U)}(n)))},className:"rosDetailWrapper"},E().createElement(j.Z,null,E().createElement(P.Breadcrumb,{ouiaId:"system-detail"},E().createElement(P.BreadcrumbItem,null,E().createElement(D.Link,{to:"/"},"Resource Optimization")),E().createElement(P.BreadcrumbItem,{isActive:!0},E().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},t?t.display_name:null))),E().createElement("div",{className:"detail-header-container"},E().createElement(_.Z,{hideBack:!0,showDelete:!1,hideInvDrawer:!0}),e.renderChildrenNode(),E().createElement(le,{inventoryId:n}))),E().createElement(I.Z,null,E().createElement(P.Grid,{gutter:"md"},E().createElement(P.GridItem,{span:12},E().createElement(x.Z,{showTags:!0,fallback:""})))))})))}}]),c}(E().Component);pe.propTypes={match:O().any,entity:O().object,loading:O().bool,rosSystemInfo:O().object,loadSystemInfo:O().func};const de=(0,D.withRouter)((0,S.$j)((function(e,t){var n,r;return me({entity:e.entityDetails&&e.entityDetails.entity,loading:null===(n=e.systemDetailReducer)||void 0===n?void 0:n.loading,rosSystemInfo:null===(r=e.systemDetailReducer)||void 0===r?void 0:r.systemInfo},t)}),(function(e){return{loadSystemInfo:function(t){return e((0,C.Of)(t))}}}))(pe))},30859:(e,t,n)=>{n.d(t,{jL:()=>f,S7:()=>h,x2:()=>y,lc:()=>g,tp:()=>v,Q5:()=>w});var r=n(87757),o=n.n(r),a=n(48926),i=n.n(a),c=n(59713),s=n.n(c),l=n(88587),u=n(14906);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){if(!e.ok)throw Error(e.statusText);return e}var f=function(){var e=new URL(u.RC+u.LO,window.location.origin);return window.insights.chrome.auth.getUser().then((function(){return fetch(e).then(d).then((function(e){return e.json()})).then((function(e){return e}))}))},h=function(e){var t=new URL(u.RC+u.M4+"/".concat(e),window.location.origin);return window.insights.chrome.auth.getUser().then((function(){return fetch(t).then(d).then((function(e){return e.json()})).then((function(e){return e}))}))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(n=p(p({},n),{},{description:t.description}));var r=new URL(u.RC+u.M4+"/".concat(e,"/suggestions"),window.location.origin);r.search=new URLSearchParams(n).toString();var o=window.insights.chrome.auth.getUser().then((function(){return fetch(r).then((function(e){if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return e}))}));return o},g=function(){var e=i()(o().mark((function e(t){var n,r,a,i,c,s,m,d,f,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return c=(i=t||{}).perPage,s=i.orderBy,m=i.orderHow,d=p(p({order_by:{display_name:"display_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[s]||"report_date",order_how:m||l.SortByDirection.desc,limit:c||-1},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),f=new URL(u.RC+u.M4,window.location.origin),h=new URLSearchParams(d),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){h.append("state",e)})),null==t||null===(a=t.osFilter)||void 0===a||a.forEach((function(e){h.append("os",e)})),f.search=h.toString(),e.abrupt("return",fetch(f).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=new URL("".concat(u.RC).concat(u.M4,"/").concat(e,"/history"),window.location.origin),r=new URLSearchParams({limit:t});return n.search=r.toString(),window.insights.chrome.auth.getUser().then((function(){return fetch(n).then(d).then((function(e){return e.json()})).then((function(e){return e}))}))},w=function(){var e=i()(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return t=new URL("".concat(u.RC).concat(u.v2),window.location.origin),e.abrupt("return",fetch(t).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},94778:(e,t,n)=>{n.d(t,{Of:()=>o,t9:()=>a,Pn:()=>i,zz:()=>c});var r=n(30859),o=function(e){return{type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.S7)(e)}},a=function(e,t){return{type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.x2)(e,t)}},i=function(){return{type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.jL)()}},c=function(e){return{type:"CHANGE_SYSTEM_COLUMNS",payload:e}}}}]);
//# sourceMappingURL=../sourcemaps/RosSystemDetail.298ada9178fcba9358c4e26c7852707c.js.map