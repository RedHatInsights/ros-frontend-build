"use strict";(self.webpackChunkros_frontend=self.webpackChunkros_frontend||[]).push([[798],{86503:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(63038),a=n.n(r),o=n(6479),i=n.n(o),c=n(67154),l=n.n(c),s=n(43297),u=n.n(s),m=n(45697),p=n.n(m),f=n(2983),d=n(79943),h=n(45103),y=u().lazy((function(){return Promise.all([n.e(939),n.e(192),n.e(91),n.e(671),n.e(632),n.e(837)]).then(n.bind(n,88422))})),g=function(e){var t=(0,f.v9)((function(e){var t,n=e.entityDetails;return null==n||null===(t=n.entity)||void 0===t?void 0:t.id}));return u().createElement(s.Suspense,{fallback:""},u().createElement(y,l()({inventoryId:t},e)))},v=function(e){var t=e.getRegistry,n=i()(e,["getRegistry"]),r=(0,s.useState)(),o=a()(r,2),c=o[0],l=o[1];return(0,s.useEffect)((function(){var e,n;t&&(null===(e=t())||void 0===e||null===(n=e.register)||void 0===n||n.call(e,{systemRecsReducer:d.rj})),l((function(){return t?f.zt:s.Fragment}))}),[t]),c?u().createElement(c,t&&{store:t().getStore()},u().createElement(g,n)):u().createElement(h.Bullseye,null,u().createElement(h.Spinner,{size:"xl"}))};v.propTypes={getRegistry:p().func};const w=v},6997:(e,t,n)=>{n.r(t),n.d(t,{default:()=>de});var r=n(59713),a=n.n(r),o=n(87757),i=n.n(o),c=n(48926),l=n.n(c),s=n(34575),u=n.n(s),m=n(93913),p=n.n(m),f=n(2205),d=n.n(f),h=n(78585),y=n.n(h),g=n(29754),v=n.n(g),w=n(43297),E=n.n(w),b=n(45697),D=n.n(b),O=n(16530),S=n(2983),I=n(45103),P=n(14748),x=n(80123),j=n(38775),_=n(53895),k=n(30319),R=n(94778),C=n(18546);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={loaded:!1},N=function(e){return T(T({},e),{},{loaded:!0})},U=n(24814),M=n(63038),F=n.n(M),B=n(11239),G=n(49580),Z=n(61088),A=n(90502),V=n(58061),Y=function(e){var t=e.system,n=(0,w.useState)(t.rating),r=F()(n,2),a=r[0],o=r[1],c=(0,w.useState)(!1),s=F()(c,2),u=s[0],m=s[1],p=function(){var e=l()(i().mark((function e(n){var r,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a===n?V.nV:n,e.prev=1,c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inventory_id:t.inventoryId,rating:r})},e.next=5,fetch("".concat(V.RC).concat(V.Up),c);case 5:o(r),m(!0),setTimeout((function(){return m(!1)}),3e3),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return E().createElement("span",{className:"ratingSpanOverride"},"Is this suggestion helpful?",E().createElement(I.Button,{variant:"plain","aria-label":"thumbs-up",onClick:function(){return p(V.xP)},ouiaId:"thumbsUp"},a===V.xP?E().createElement(Z.ZP,{className:"like",size:"sm"}):E().createElement(B.ZP,{size:"sm"})),E().createElement(I.Button,{variant:"plain","aria-label":"thumbs-down",onClick:function(){return p(V.RM)},ouiaId:"thumbsDown"},a===V.RM?E().createElement(A.ZP,{className:"dislike",size:"sm"}):E().createElement(G.ZP,{size:"sm"})),u&&"Thank you for your feedback!")};Y.propTypes={system:D().object};const H=Y;var W=n(36269),J=n(85333),q=n(87999),Q=n(77938),$=n(29296),K=n(32576),X=n(7716),ee=n(10310),te=n(40621),ne=n(2370),re=n(26383),ae=n(66207),oe=n(74174),ie=n(96466),ce=n(55795),le=n(30859),se=function(e,t){var n=[],r=new Date,a={datapoints:[]},o={datapoints:[]},i=new Map;e.reverse().forEach((function(e){i.set(new Date(e.report_date).toDateString(),e)}));for(var c=t-1;c>=0;c--){var l=new Date;l=new Date(l.setDate(r.getDate()-c)).toDateString(),i.has(l)?(a.datapoints.push({name:"CPU Utilization",x:new Date(l),y:i.get(l).cpu}),o.datapoints.push({name:"Memory Utilization",x:new Date(l),y:i.get(l).memory})):(a.datapoints.push({name:"CPU Utilization",x:new Date(l),y:null}),o.datapoints.push({name:"Memory Utilization",x:new Date(l),y:null}))}return n.push(a),n.push(o),n},ue=function(e){var t=e.inventoryId,n=(0,w.useState)(!1),r=F()(n,2),a=r[0],o=r[1],c=(0,w.useState)(V.Mo),s=F()(c,2),u=s[0],m=s[1],p=(0,w.useState)([]),f=F()(p,2),d=f[0],h=f[1],y=(0,w.useState)(!1),g=F()(y,2),v=g[0],b=g[1],D=(0,$.f)("zoom","voronoi");(0,w.useEffect)((function(){function e(){return(e=l()(i().mark((function e(){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=u===V.Mo?V.Mo:V.zO,e.next=4,(0,le.tp)(t,n);case 4:r=e.sent,a=se(r.data,u),h(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b(!0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}h([]),function(){e.apply(this,arguments)}()}),[u]);var O,S,P,x=function(e){e!==u&&h([]),m(e),o(!a)},j=[E().createElement(I.DropdownItem,{key:"action_7",component:"button",onClick:function(){return x(V.Mo)}},"Last 7 Days"),E().createElement(I.DropdownItem,{key:"action_45",component:"button",onClick:function(){return x(V.NG)}},"Last 45 Days")];return v?E().createElement(I.FlexItem,{alignSelf:{default:"alignSelfBaseline"}},E().createElement(I.EmptyState,{variant:I.EmptyStateVariant.small},E().createElement(I.Title,{headingLevel:"h2",size:"lg"},"Something went wrong"),E().createElement(I.EmptyStateBody,null,"There was a problem while requesting historical data. Please try again later."))):0===d.length?E().createElement(I.FlexItem,{alignSelf:{default:"alignSelfBaseline"}},E().createElement(I.Bullseye,null,E().createElement(I.Spinner,{size:"xl","aria-labelledby":"loading-historical-chart"}))):E().createElement(I.Flex,{direction:{default:"column"},alignSelf:{default:"alignSelfBaseline"},align:{default:"alignRight"}},E().createElement(I.FlexItem,{align:{default:"alignRight"}},E().createElement("div",{className:"chartDateFilter"},E().createElement(I.Tooltip,{content:E().createElement("div",null,"Scroll and pan to zoom and move")},E().createElement(ce.ZP,{size:"sm"})),E().createElement(I.Dropdown,{className:"dateDropdown",toggle:E().createElement(I.DropdownToggle,{id:"chart-date-toggle",onToggle:function(e){o(e)},toggleIndicator:ie.ZP},"Last ".concat(u===V.Mo?V.Mo:V.zO," Days")),isOpen:a,dropdownItems:j}))),E().createElement(I.FlexItem,{align:{default:"alignRight"},className:"historical-chart-panel"},E().createElement(K.k,{domain:(O=new Date,S=new Date,P=u===V.Mo?V.Mo:V.NG,{y:[0,100],x:[S=new Date(S.setDate(O.getDate()-P)),O]}),scale:{x:"time",y:"linear"},containerComponent:E().createElement(D,{labels:function(e){return t=e.datum,n=new Date(t.x),r=(new Date).toDateString()===n.toDateString()?"Today":"".concat(n.getDate()," ").concat(V.gg[n.getMonth()]),r=t.name.includes("CPU")?"".concat(r,"\n   \n"):"",t.childName.includes("scatter-")&&null!==t.y?"".concat(r).concat(t.name,": ").concat(t.y,"%"):null;var t,n,r},labelComponent:E().createElement(X.L,{labelComponent:E().createElement(ee.Df,{style:[{fill:"white",fontSize:16,fontWeight:700},{fill:"white"},{fill:"white"},{fill:"white"}]})}),constrainToVisibleArea:!0,voronoiDimension:"x",zoomDimension:"x"}),legendData:[{name:"CPU Utilization"},{name:"Memory Utilization"}],legendOrientation:"vertical",legendPosition:"right",height:275,width:756,maxDomain:{y:100},minDomain:{y:0},padding:{bottom:50,left:50,right:165,top:50},themeColor:te.nz.blue},E().createElement(ne.C,{tickValues:d[0].datapoints.map((function(e){return e.x})),tickFormat:function(e){return(new Date).toDateString()===new Date(e).toDateString()?"Today":"".concat(new Date(e).getDate()," ").concat(V.gg[new Date(e).getMonth()])},fixLabelOverlap:!0,tickCount:6}),E().createElement(ne.C,{dependentAxis:!0,showGrid:!0,tickValues:[0,20,40,60,80,100],tickFormat:function(e){return"".concat(e,"%")}}),E().createElement(re.G,null,d.map((function(e,t){return E().createElement(ae.L,{data:e.datapoints,key:"scatter-"+t,name:"scatter-"+t})}))),E().createElement(re.G,null,d.map((function(e,t){return E().createElement(oe.m,{key:"line-"+t,name:"line-"+t,data:e.datapoints})}))))))};ue.propTypes={inventoryId:D().string};var me=n(86503);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fe=function(e){d()(c,e);var t,n,r,o=(n=c,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v()(n);if(r){var a=v()(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return y()(this,e)});function c(e){var t;return u()(this,c),(t=o.call(this,e)).state={inventoryId:t.props.match.params.inventoryId},t}return p()(c,[{key:"componentDidMount",value:(t=l()(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=insights.chrome)||void 0===t||null===(n=t.hideGlobalFilter)||void 0===n||n.call(t,!0),insights.chrome.appAction("system-detail"),e.next=4,this.props.loadSystemInfo(this.state.inventoryId);case 4:document.title=this.props.rosSystemInfo.display_name;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderChildrenNode",value:function(){if(this.props.rosSystemInfo){var e=this.props.rosSystemInfo,t=e.cloud_provider,n=e.instance_type,r=e.idling_time,a=e.report_date,o=e.rating,i=e.state,c=this.props.match.params.inventoryId;return E().createElement(I.Flex,{alignItems:{default:"alignItemsCenter"}},E().createElement(I.Flex,{grow:{default:"grow"},className:"ros-system-info"},E().createElement(I.Flex,{flex:{default:"flex_4"},direction:{default:"column"}},E().createElement(I.FlexItem,null,E().createElement(I.DescriptionList,{className:"expanded-row",isCompact:!0,isHorizontal:!0},E().createElement(I.DescriptionListGroup,null,E().createElement(I.DescriptionListTerm,null,"Last reported"),E().createElement(I.DescriptionListDescription,null,(0,Q.hb)(a))),E().createElement(I.DescriptionListGroup,null,E().createElement(I.DescriptionListTerm,null,"State"),E().createElement(I.DescriptionListDescription,null,E().createElement(W.l,{stateValue:i})))),E().createElement(U.v,{cloudProvider:t,instanceType:n,idlingTime:r,inventoryId:c}),E().createElement(H,{system:{rating:o,inventoryId:c}}))),E().createElement(I.Flex,{grow:{default:"grow"},direction:{default:"column"}},E().createElement(ue,{inventoryId:c}))))}return null}},{key:"render",value:function(){var e=this,t=this.props.entity;return E().createElement(E().Fragment,null,E().createElement(q.B.Consumer,null,(function(n){return!1===n.permissions.systemsRead?E().createElement(J.Z,{serviceName:"Resource Optimization"}):E().createElement(j.Z,{inventoryId:e.state.inventoryId,onLoad:function(e){var t=e.mergeWithDetail,n=e.INVENTORY_ACTION_TYPES;(0,k.z2)(t(function(e){var t=e.LOAD_ENTITY_FULFILLED;return(0,C.Gg)(a()({},t,N),z)}(n)))},className:"rosDetailWrapper"},E().createElement(x.Z,null,E().createElement(I.Breadcrumb,{ouiaId:"system-detail"},E().createElement(I.BreadcrumbItem,null,E().createElement(O.Link,{to:"/"},"Resource Optimization")),E().createElement(I.BreadcrumbItem,{isActive:!0},E().createElement("div",{className:"ins-c-inventory__detail--breadcrumb-name"},t?t.display_name:null))),E().createElement(I.Stack,{hasGutter:!0},E().createElement(I.StackItem,null,E().createElement(_.Z,{hideBack:!0,showDelete:!1,hideInvDrawer:!0,className:"rosDetailsHead"})),E().createElement(I.StackItem,{isFilled:!0},e.renderChildrenNode()))),E().createElement(P.Z,null,E().createElement(I.Grid,{gutter:"md"},E().createElement(I.GridItem,{span:12},t?E().createElement(me.default,{showTags:!0,fallback:""}):E().createElement(I.Spinner,null)))))})))}}]),c}(E().Component);fe.propTypes={match:D().any,entity:D().object,loading:D().bool,rosSystemInfo:D().object,loadSystemInfo:D().func};const de=(0,O.withRouter)((0,S.$j)((function(e,t){var n,r;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({entity:e.entityDetails&&e.entityDetails.entity,loading:null===(n=e.systemDetailReducer)||void 0===n?void 0:n.loading,rosSystemInfo:null===(r=e.systemDetailReducer)||void 0===r?void 0:r.systemInfo},t)}),(function(e){return{loadSystemInfo:function(t){return e((0,R.Of)(t))}}}))(fe))},30859:(e,t,n)=>{n.d(t,{jL:()=>d,S7:()=>h,x2:()=>y,lc:()=>g,tp:()=>v,Q5:()=>w});var r=n(87757),a=n.n(r),o=n(48926),i=n.n(o),c=n(59713),l=n.n(c),s=n(88587),u=n(58061);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){if(!e.ok)throw Error(e.statusText);return e}var d=function(){var e=new URL(u.RC+u.LO,window.location.origin);return window.insights.chrome.auth.getUser().then((function(){return fetch(e).then(f).then((function(e){return e.json()})).then((function(e){return e}))}))},h=function(e){var t=new URL(u.RC+u.M4+"/".concat(e),window.location.origin);return window.insights.chrome.auth.getUser().then((function(){return fetch(t).then(f).then((function(e){return e.json()})).then((function(e){return e}))}))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(n=p(p({},n),{},{description:t.description}));var r=new URL(u.RC+u.M4+"/".concat(e,"/suggestions"),window.location.origin);r.search=new URLSearchParams(n).toString();var a=window.insights.chrome.auth.getUser().then((function(){return fetch(r).then((function(e){if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return e}))}));return a},g=function(){var e=i()(a().mark((function e(t){var n,r,o,i,c,l,m,f,d,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return c=(i=t||{}).perPage,l=i.orderBy,m=i.orderHow,f=p(p({order_by:{display_name:"display_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[l]||"report_date",order_how:m||s.SortByDirection.desc,limit:c||-1},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),d=new URL(u.RC+u.M4,window.location.origin),h=new URLSearchParams(f),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){h.append("state",e)})),null==t||null===(o=t.osFilter)||void 0===o||o.forEach((function(e){h.append("os",e)})),d.search=h.toString(),e.abrupt("return",fetch(d).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=new URL("".concat(u.RC).concat(u.M4,"/").concat(e,"/history"),window.location.origin),r=new URLSearchParams({limit:t});return n.search=r.toString(),window.insights.chrome.auth.getUser().then((function(){return fetch(n).then(f).then((function(e){return e.json()})).then((function(e){return e}))}))},w=function(){var e=i()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.insights.chrome.auth.getUser();case 2:return t=new URL(u.t5,window.location.origin),e.abrupt("return",fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"executiveReport"})}).then(f).then((function(e){return e.blob()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},94778:(e,t,n)=>{n.d(t,{Of:()=>a,t9:()=>o,Pn:()=>i,zz:()=>c});var r=n(30859),a=function(e){return{type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.S7)(e)}},o=function(e,t){return{type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.x2)(e,t)}},i=function(){return{type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.jL)()}},c=function(e){return{type:"CHANGE_SYSTEM_COLUMNS",payload:e}}}}]);