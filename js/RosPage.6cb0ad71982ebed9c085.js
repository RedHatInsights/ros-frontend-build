(self.webpackChunkros_frontend=self.webpackChunkros_frontend||[]).push([[7821],{3955:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});var r=n(43297),o=n.n(r),a=n(55138),i=n(22663),l=n(41763),s=function(){return o().createElement(r.Suspense,{fallback:o().createElement(a.Bullseye,null,o().createElement(a.Spinner,null))},o().createElement(i.Z,{appId:"ros_zero_state",appName:"dashboard",module:"./AppZeroState",scope:"dashboard",ErrorComponent:o().createElement(l.Z,null),app:"Resource_Optimization"}))}},39426:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Te});var r=n(67154),o=n.n(r),a=n(319),i=n.n(a),l=n(87757),s=n.n(l),c=n(48926),u=n.n(c),p=n(34575),f=n.n(p),d=n(93913),m=n.n(d),h=n(81506),g=n.n(h),y=n(2205),v=n.n(y),b=n(78585),S=n.n(b),w=n(29754),O=n.n(w),E=n(59713),x=n.n(E),C=n(43297),F=n.n(C),k=n(45697),_=n.n(k),D=n(16530),R=n(80123),P=n(39173),j=n(14748),T=n(55138),B=n(68770),N=n(2983),z=n(33739),L=n(30319),I=n(70702),V=n(94778),A=n(58061),M=n(3955),H=n(87999),U=n(85333),G=n(63038),Z=n.n(G);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e){var t=e.modalColumns,n=e.isModalOpen,r=e.setModalOpen,o=e.saveColumns,a=(0,C.useState)(t),l=Z()(a,2),s=l[0],c=l[1],u=function(){r(!1),c(t)};return F().createElement(T.Modal,{title:"Manage columns",onClose:u,isOpen:n,variant:"small",description:F().createElement(T.TextContent,null,F().createElement(T.Text,{component:T.TextVariants.p},"Selected categories will be displayed in the table"),F().createElement(T.Split,{hasGutter:!0},F().createElement(T.SplitItem,null,F().createElement(T.Button,{isInline:!0,onClick:function(){c(s.map((function(e){return q(q({},e),{},{isChecked:!0})})))},variant:"link"},"Select all")),F().createElement(T.SplitItem,null,F().createElement(T.Button,{isInline:!0,onClick:function(){c(s.map((function(e){var t;return q(q({},e),{},{isChecked:null!==(t=e.isShownByDefault)&&void 0!==t&&t})})))},variant:"link"},"Reset to default")))),actions:[F().createElement(T.Button,{key:"save",variant:"primary",onClick:function(){r(!1),o(s)}},"Save"),F().createElement(T.Button,{key:"cancel",variant:"secondary",onClick:u},"Cancel")]},F().createElement(T.DataList,{"aria-label":"Column management table",id:"column-management-table",isCompact:!0},s.map((function(e,t){return F().createElement(T.DataListItem,{key:e.key},F().createElement(T.DataListItemRow,null,F().createElement(T.DataListCheck,{checked:e.isChecked,id:"checkbox-".concat(t),onChange:function(){return function(e){var t=i()(s),n=q({},t[e]);n.isChecked=!n.isChecked,t[e]=n,c(t)}(t)},isDisabled:e.isDisabled}),F().createElement(T.DataListItemCells,{dataListCells:[F().createElement(T.DataListCell,{key:"column-table-item-".concat(t)},F().createElement("label",null,e.modalTitle))]})))}))))};Y.propTypes={modalColumns:_().arrayOf(_().object).isRequired,isModalOpen:_().bool.isRequired,setModalOpen:_().func.isRequired,saveColumns:_().func.isRequired};var W=n(6479),X=n.n(W),$=n(3968),J=["display_name","groups","os","performance_utilization.cpu","performance_utilization.memory","performance_utilization.max_io","number_of_suggestions","state","report_date"],K=["display_name","os","performance_utilization.cpu","performance_utilization.memory","performance_utilization.max_io","number_of_suggestions","state","cloud_provider","instance_type","idling_time","report_date","groups"],ee=["performance_utilization.cpu","performance_utilization.memory","idling_time"],te={variant:"info",title:"Generating data. Download may take a moment to start."},ne={variant:"success",title:"Export successful"},re={variant:"danger",autoDismiss:!1,title:"Export failed. Please try exporting again."},oe=n(30859),ae=n(27361),ie=n.n(ae),le=n(39371),se=function(e,t){var n=[],r="json"===t?K:J;return e.map((function(e){var o="json"===t?{}:[];r.map((function(n){var r;"groups"===n?r=0===(r=ie()(e,n,[])).length?"N/A":r[0].name:(r="N/A"!==(r=null===(r=ie()(e,n,""))||-1===r?"N/A":r.toString())&&ee.includes(n)?"".concat(r,"%"):r,r="report_date"===n?(0,le.dateStringByType)("exact")(new Date(r)):r),"json"===t?o[n]=r:"pdf"===t&&o.push(r)})),n.push(o)})),n},ce=function(e){var t=se(e,"json");return JSON.stringify(t)},ue=function(e){var t=se(e,"json"),n=Object.keys(t[0]);return[n.join(",")].concat(i()(t.map((function(e){return n.map((function(t){return e[t]})).join(",")})))).join("\r\n")},pe=function(e){var t,n,r,o,a="",i="\n",l=(null==e||null===(t=e.stateFilter)||void 0===t?void 0:t.length)>0,s=(null==e||null===(n=e.hostnameOrId)||void 0===n?void 0:n.length)>0,c=(null==e||null===(r=e.osFilter)||void 0===r?void 0:r.length)>0,u=(null==e||null===(o=e.groupFilter)||void 0===o?void 0:o.length)>0;return(l||s||c||u)&&(a="".concat(i,"Filters applied").concat(i),a=s?a.concat("Name: ".concat(e.hostnameOrId).concat(i)):a,a=l?a.concat("State: ".concat(e.stateFilter.toString()).concat(i)):a,a=c?a.concat("Operating System: ".concat(e.osFilter.sort().toString()).concat(i)):a,a=u?a.concat("Groups: ".concat(e.groupFilter.toString())):a),a},fe=function(){var e="".concat((new Date).toISOString().replace(/[T:]/g,"-").split(".")[0],"-utc");return"".concat("resource_optimization--").concat(e)},de=n(69748),me=n(94805);const he=de.mM.create({bodyCell:{textAlign:"left",fontSize:8,paddingBottom:2,paddingTop:2,paddingLeft:2,flex:1},headerCell:{textAlign:"left",fontSize:8,flex:1},systemNameCell:{textAlign:"left",fontSize:8,flex:2.5,paddingBottom:2,paddingTop:2,paddingRight:4},lastReportedCell:{textAlign:"left",fontSize:8,flex:1.2,paddingBottom:2,paddingTop:2,paddingLeft:2},headerStyle:{display:"flex",flexDirection:"row",justifyContent:"space-around"},rowStyle:{display:"flex",flexDirection:"row",justifyContent:"center"},execHeading:{textAlign:"left",fontSize:10,color:"#C9190B",marginBottom:4,marginTop:10},occurrenceHeading:{textAlign:"left",fontSize:10,color:"#C9190B",marginTop:12,marginBottom:-4},execInfoText:{flex:1,textAlign:"right",fontSize:7,color:"#6A6E73"},instanceTypeHeading:{textAlign:"left",fontSize:10,color:"#C9190B",marginTop:20},instanceTypeHeadingFirst:{textAlign:"left",fontSize:10,color:"#C9190B"},instanceTypeDesc:{fontSize:10,textAlign:"left",marginBottom:4},flexRow:{display:"flex",flexDirection:"row"},tableRowBackground:{backgroundColor:me.ZP.value},instanceTableHeading:{fontSize:10,color:"#6A6E73",paddingBottom:4,fontWeight:"bold"},bold:{fontFamily:"Helvetica-Bold",fontWeight:700}});var ge=function(e){var t=e.value,n=e.style,r=e.key;return F().createElement(de.xv,{key:r,style:n},t)},ye=["Name","Group","OS","CPU utilization","Memory utilization","I/O utilization","Suggestions","State","Last reported"],ve=function(e){var t=e.data,n=e.page,r=ye.map((function(e,t){var n="Name"===e?[he.systemNameCell]:"Last reported"===e?[he.lastReportedCell]:[he.headerCell];return ge({value:e,style:n,key:"".concat(t,"-").concat(e)})})),o=t.map((function(e){return e.map((function(e,t){var n=ye.indexOf("Name"),r=ye.indexOf("Last reported"),o=t===n?[he.systemNameCell]:t===r?[he.lastReportedCell]:[he.bodyCell];return ge({value:e,style:o,key:"".concat(t,"-").concat(e)})}))}));return F().createElement(C.Fragment,{key:n},F().createElement($.$0,null,F().createElement($.sg,null,F().createElement($.iA,{withHeader:!0,rows:[r].concat(i()(o))}))))};ve.propTypes={data:_().array,page:_().number},ge.propTypes={value:_().string,style:_().array,key:_().string};var be=function(e){var t=e.data,n=e.totalSystems,r=e.filterText;return F().createElement(C.Fragment,{key:"first-section"},F().createElement($.$0,null,F().createElement($.sg,null,"This report identified ".concat(n," ").concat(n>1?"RHEL systems":"RHEL system",". ").concat(r))),F().createElement(ve,{data:t,page:0}))};be.propTypes={data:_().array,totalSystems:_().number,filterText:_().string};var Se=n(83215),we=function(e){var t=e.filters,n=e.orderBy,r=e.orderHow,a=X()(e,["filters","orderBy","orderHow"]),l=fe(),c=(0,N.I0)(),p=te,f=ne,d=re;(0,C.useEffect)((function(){c((0,Se.wN)(p))}),[]);var m=function(){var e=u()(s().mark((function e(t,n,r){var a,l,u,p,m,h,g,y,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=16,p=22,m={filters:t,stateFilter:t.stateFilter,osFilter:t.osFilter,groupFilter:t.groupFilter,orderBy:n,orderHow:r},e.prev=2,e.next=5,(0,oe.lc)(m);case 5:h=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),c((0,Se.L1)()),c((0,Se.wN)(d)),e.abrupt("return",[]);case 13:for(g=se(h.data,"pdf"),y={data:g.splice(0,u),totalSystems:null===(a=h)||void 0===a||null===(l=a.meta)||void 0===l?void 0:l.count,filterText:pe(t)},v=[];g.length>0;)v.push(g.splice(0,p));return c((0,Se.L1)()),c((0,Se.wN)(f)),e.abrupt("return",[F().createElement(be,o()({key:"first-page"},y))].concat(i()(v.map((function(e,t){return F().createElement(ve,{key:t,data:e,page:t+1})})))));case 20:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n,r){return e.apply(this,arguments)}}();return F().createElement("div",null,F().createElement($.o6,o()({},a,{reportName:"Insights Resource Optimization Systems Report",type:"",fileName:"".concat(l,".pdf"),size:"A4",orientation:"landscape",allPagesHaveTitle:!1,asyncFunction:function(){return m(t,n,r)}})))};we.propTypes={filters:_().object,orderBy:_().string,orderHow:_().string};var Oe=n(1284),Ee=function(){var e=u()(s().mark((function e(t,n,r,o,a,i){var l,c,u,p,f,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=fe(),c=ne,u=re,a(te),p={filters:n,stateFilter:n.stateFilter,osFilter:n.osFilter,orderBy:r,orderHow:o},e.prev=4,e.next=7,(0,oe.lc)(p);case 7:f=e.sent,d="json"===t?ce(f.data):ue(f.data),(0,Oe.downloadFile)(d,l,t),i(),a(c),e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(4),i(),a(u),"".concat(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,n,r,o,a,i){return e.apply(this,arguments)}}(),xe=n(1657),Ce=function(e){var t=e.isDisabled,n=(0,C.useState)(!1),r=Z()(n,2),o=r[0],a=r[1],i=(0,N.I0)(),l=te,c=ne,p=re,f=function(){var e=u()(s().mark((function e(){var t,n,r,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat((new Date).toISOString().replace(/[T:]/g,"-").split(".")[0],"-utc.pdf"),n="".concat("Resource-Optimization-Executive-Report--").concat(t),e.prev=2,a(!0),i((0,Se.wN)(l)),e.next=7,(0,oe.Q5)();case 7:r=e.sent,o=window.URL.createObjectURL(r),(u=document.createElement("a")).href=o,u.download=n,document.body.appendChild(u),u.click(),u.remove(),i((0,Se.L1)()),i((0,Se.wN)(c)),a(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(2),i((0,Se.L1)()),i((0,Se.wN)(p)),a(!1);case 25:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(){return e.apply(this,arguments)}}();return F().createElement(C.Fragment,null,F().createElement(T.Button,{variant:"link",icon:F().createElement(xe.ZP,null),iconPosition:"left",onClick:function(){return f()},isDisabled:o||t,className:"downloadButtonOverride"},o?"Loading...":"Download executive report"))};Ce.propTypes={isDisabled:_().bool};var Fe=n(55140),ke=n(76866),_e=n(67768),De=n(77938);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){v()(p,e);var t,n,r,o,a,l,c=(a=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O()(a);if(l){var n=O()(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S()(this,e)});function p(e){var t;return f()(this,p),t=c.call(this,e),x()(g()(t),"updateStateFilter",(function(e){t.setState({stateFilterValue:e})})),x()(g()(t),"updateOSFilter",(function(e){t.setState({osFilterValue:e})})),x()(g()(t),"onDeleteFilters",(function(e,n){var r=n.filter((function(e){return"State"===e.category})),o=n.filter((function(e){return"Operating System"===e.category}));if(r.length>0){var a;t.clearStateQueryParams();var i=null===(a=r[0])||void 0===a?void 0:a.chips.map((function(e){return null==e?void 0:e.name})),l=t.state.stateFilterValue.filter((function(e){return!i.includes(e)}));t.setState({stateFilterValue:l})}if(o.length>0){var s,c=null===(s=o[0])||void 0===s?void 0:s.chips.map((function(e){return null==e?void 0:e.name})),u=t.state.osFilterValue.filter((function(e){return!c.includes(e)}));t.setState({osFilterValue:u})}})),x()(g()(t),"getActiveFilterConfig",(function(){var e=t.state.stateFilterValue.map((function(e){return{name:e}})),n=t.state.osFilterValue.map((function(e){return{name:e}})),r=[];return e.length>0&&r.push({category:"State",chips:e}),n.length>0&&r.push({category:"Operating System",chips:n}),r})),x()(g()(t),"setColumnModalOpen",(function(e){t.setState({isColumnModalOpen:e})})),x()(g()(t),"getActiveColumns",(function(){return t.props.columns.filter((function(e){return e.isChecked}))})),t.state={perPage:10,orderBy:"report_date",orderDirection:B.SortByDirection.desc,stateFilterValue:[],isColumnModalOpen:!1,exportSystemsPDF:!1,nameFilterValue:"",groupFilterValue:[],disableExport:!0,osFilterValue:[],OSFObject:{}},t.sortingHeader={display_name:"display_name",group_name:"group_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"},t.chunkSize=50,t.inventory=F().createRef(),t.fetchSystems=t.fetchSystems.bind(g()(t)),t}return m()(p,[{key:"componentDidMount",value:(o=u()(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(n=this.props.chrome)||null===(t=n.hideGlobalFilter)||void 0===t||t.call(n,!0),null==n||n.appAction("ros-systems"),e.next=5,this.props.isROSConfigured();case 5:this.processQueryParams(),this.processFilterValues(),this.props.groupsEnabled&&A.XY.splice(1,0,{key:"groups",title:"Group",modalTitle:"Group",dataLabel:"Group",renderFunc:function(e){return(0,De.d1)(e)},isChecked:!0,isDisabled:!1,isShownByDefault:!0,props:{isStatic:!0}});case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"processQueryParams",value:function(){var e=this.props.location,t=new URLSearchParams(e.search),n=t.get(A.Q0);"true"===t.get(A.H7)?this.setState({stateFilterValue:["Waiting for data"]}):"true"===n&&this.setState({stateFilterValue:["Undersized","Oversized","Under pressure","Idling"]})}},{key:"processFilterValues",value:function(){var e=this,t={label:"Operating system"};t.type=ke.conditionalFilterType.checkbox,t.filterValues={},this.fetchSystems({perPage:-1,orderBy:"os",orderHow:B.SortByDirection.desc}).then((function(n){t.filterValues.items=Array.from(new Set(n.data.reduce((function(e,t){return t.os&&e.push(t.os),e}),[]))).map((function(e){return{label:e,value:e.split(" ")[1]}})),0===t.filterValues.items.length&&(t.filterValues.items=[{label:"No versions available"}],t.type=ke.conditionalFilterType.group),e.setState({OSFObject:t})}))}},{key:"clearStateQueryParams",value:function(){var e=this.props.location,t=new URL(window.location),n=new URLSearchParams(e.search),r=n.get(A.Q0);(n.get(A.H7)||r)&&(n.delete(A.Q0),n.delete(A.H7),window.history.replaceState(null,"","".concat(t.origin).concat(t.pathname,"?").concat(n.toString()).concat(window.location.hash)))}},{key:"fetchSystems",value:(r=u()(s().mark((function e(t){var n,r,o,a,i,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Pe(Pe({limit:t.perPage},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),{},{order_by:t.orderBy||this.state.orderBy,order_how:t.orderHow||this.state.orderDirection},(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),l=new URL(A.RC+A.M4,window.location.origin),c=new URLSearchParams(i),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){c.append("state",e)})),null==t||null===(o=t.osFilter)||void 0===o||o.forEach((function(e){c.append("os",e)})),null==t||null===(a=t.groupFilter)||void 0===a||a.forEach((function(e){c.append("group_name",e)})),l.search=c.toString(),e.abrupt("return",fetch(l).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"chunkIdsArray",value:function(e){for(var t=[];e.length;)t.push(e.splice(0,this.chunkSize));return t}},{key:"fetchInventoryDetails",value:(n=u()(s().mark((function e(t,n){var r,o,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!(n.per_page>50&&t.length>50)){e.next=8;break}return e.next=4,this.multipleGetEntitiesRequests(t,n);case 4:e.sent.map((function(e){var t;(t=r).push.apply(t,i()(e))})),e.next=12;break;case 8:return e.next=10,null===(o=(a=this.state).getEntities)||void 0===o?void 0:o.call(a,t,n,!1);case 10:l=e.sent,r=l.results;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"multipleGetEntitiesRequests",value:(t=u()(s().mark((function e(t,n){var r,o=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.chunkIdsArray(t),e.abrupt("return",Promise.all(r.map(function(){var e=u()(s().mark((function e(t){var r,a,i,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=(a=o.state).getEntities)||void 0===r?void 0:r.call(a,t,n,!1);case 2:return i=e.sent,l=i.results,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return e})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"setExportSystemsPDF",value:function(e){this.setState({exportSystemsPDF:e})}},{key:"onExportOptionSelect",value:function(e){var t=this.state,n=t.stateFilterValue,r=t.nameFilterValue,o=t.osFilterValue,a=t.orderBy,i=t.orderDirection,l={stateFilter:n,hostnameOrId:r,osFilter:o},s=this.props,c=s.addNotification,u=s.clearNotifications;Ee(e,l,a,i,(function(e){return c(e)}),(function(){return u()}))}},{key:"renderConfigStepsOrTable",value:function(){var e,t=this,n=A.N7.state,r=this.getActiveColumns(),o=this.state,a=o.exportSystemsPDF,i=o.stateFilterValue,l=o.nameFilterValue,c=o.osFilterValue,p=o.groupFilterValue,f=o.orderBy,d=o.orderDirection,m=o.disableExport,h=o.isColumnModalOpen,g=o.OSFObject,y={items:[{label:n.label,type:n.type,value:"checkbox-state",filterValues:{items:n.filterValues.items,onChange:function(e,n){return t.updateStateFilter(n)},value:i}},{label:g.label,type:g.type,value:"checkbox-os",filterValues:{items:null===(e=g.filterValues)||void 0===e?void 0:e.items,onChange:function(e,n){return t.updateOSFilter(n)},value:c}}]};return this.props.showConfigSteps?F().createElement(M.v,null):F().createElement(F().Fragment,null,F().createElement(R.Z,{className:"ros-page-header"},F().createElement(P.Z,{title:"Resource Optimization"}),F().createElement(Ce,{isDisabled:this.state.disableExport})),F().createElement(j.Z,null,F().createElement(T.Card,{className:"pf-t-light  pf-m-opaque-100"},F().createElement(T.CardBody,null,F().createElement(Y,{isModalOpen:h,setModalOpen:this.setColumnModalOpen,modalColumns:this.props.columns,saveColumns:function(e){return t.props.changeSystemColumns({columns:e})}}),F().createElement(z.Z,{disableDefaultColumns:!0,ref:this.inventory,hasCheckbox:!1,tableProps:{canSelectAll:!1,className:"ros-systems-table"},variant:"compact",hideFilters:{all:!0,name:!1,hostGroupFilter:!1},autoRefresh:!0,customFilters:{stateFilter:i,osFilter:c},columns:r,getEntities:function(){var e=u()(s().mark((function e(n,r){var o,a,i,l,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState((function(){var e,t;return{orderBy:r.orderBy,orderDirection:r.orderDirection,nameFilterValue:null===(e=r.filters)||void 0===e?void 0:e.hostnameOrId,groupFilterValue:null==r||null===(t=r.filters)||void 0===t?void 0:t.hostGroupFilter}})),e.next=3,t.fetchSystems({page:r.page,perPage:r.per_page,orderBy:t.sortingHeader[r.orderBy],orderHow:r.orderDirection,filters:r.filters,stateFilter:r.stateFilter,osFilter:r.osFilter,groupFilter:null==r||null===(o=r.filters)||void 0===o?void 0:o.hostGroupFilter});case 3:return i=e.sent,l=(i.data||[]).map((function(e){return e.inventory_id})),e.next=7,t.fetchInventoryDetails(l,Pe(Pe({},r),{},{orderBy:void 0,orderDirection:void 0,page:1,hasItems:!0}));case 7:return c=e.sent,u=0===(null==i||null===(a=i.meta)||void 0===a?void 0:a.count),t.setState((function(){return{disableExport:u}})),e.abrupt("return",{results:i.data.map((function(e){var t=c.find((function(t){return t.id===e.inventory_id}));return Pe(Pe(Pe({},t),t?{isDeleted:!1}:{id:e.inventory_id,isDeleted:!0}),e)})),total:i.meta.count,page:r.page,per_page:r.per_page});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onLoad:function(e){var n=e.mergeWithEntities,r=e.INVENTORY_ACTION_TYPES,o=e.api;t.setState({getEntities:null==o?void 0:o.getEntities}),(0,L.z2)(Pe({},n((0,I.zw)(r,A.XY)))),t.props.setSort(f,d,"CHANGE_SORT")},expandable:"true",filterConfig:y,activeFiltersConfig:{filters:this.getActiveFilterConfig(),onDelete:this.onDeleteFilters},actionsConfig:{actions:["",{label:"Manage columns",onClick:function(){return t.setColumnModalOpen(!0)}}]},exportConfig:{isDisabled:m,extraItems:[F().createElement("li",{key:"pdf-button-item",role:"menuitem"},F().createElement(T.Button,{key:"pdf-download-button",variant:"none",className:"pf-c-dropdown__menu-item",onClick:function(){return t.setExportSystemsPDF(!0)}},"Export to PDF"))],ouiaId:"export",onSelect:function(e,n){return t.onExportOptionSelect(n)}},onExpandClick:function(e,n,r,o){var a=o.id;return t.props.expandRow(a,r,"EXPAND_ROW")}}),a&&F().createElement(we,{showButton:!1,onSuccess:function(){return t.setExportSystemsPDF(!1)},filters:{stateFilter:i,hostnameOrId:l,osFilter:c,groupFilter:p},orderBy:f,orderHow:d})))))}},{key:"render",value:function(){var e=this;return F().createElement(F().Fragment,null,F().createElement(H.B.Consumer,null,(function(t){return!1===t.permissions.hasRead?F().createElement(U.Z,{serviceName:A.m_}):e.renderConfigStepsOrTable()})))}}]),p}(F().Component);je.propTypes={expandRow:_().func,setSort:_().func,isROSConfigured:_().func,showConfigSteps:_().bool,location:_().object,columns:_().array,changeSystemColumns:_().func,addNotification:_().func,clearNotifications:_().func,chrome:_().object,groupsEnabled:_().bool};const Te=(0,D.withRouter)((0,N.$j)((function(e,t){var n;return Pe({showConfigSteps:null===(n=e.isConfiguredReducer)||void 0===n?void 0:n.showConfigSteps,columns:e.systemColumnsReducer.columns},t)}),(function(e){return{expandRow:function(t,n,r){return e({type:r,payload:{id:t,isOpen:n}})},setSort:function(t,n,r){return e({type:r,payload:{key:t,direction:n}})},isROSConfigured:function(){return e((0,V.Pn)())},changeSystemColumns:function(t){return e((0,V.zz)(t))},addNotification:function(t){return e((0,Se.wN)(t))},clearNotifications:function(){return e((0,Se.L1)())}}}))((function(e){var t,n,r=(0,Fe.Z)(),a=("hbi.ui.inventory-groups",t=(0,_e.useFlagsStatus)().flagsReady,n=(0,_e.useFlag)("hbi.ui.inventory-groups"),!!t&&n);return F().createElement(je,o()({},e,{chrome:r,groupsEnabled:a}))})))},30859:(e,t,n)=>{"use strict";n.d(t,{Q5:()=>b,S7:()=>h,jL:()=>m,lc:()=>y,tp:()=>v,x2:()=>g});var r=n(87757),o=n.n(r),a=n(48926),i=n.n(a),l=n(59713),s=n.n(l),c=n(68770),u=n(58061);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){if(!e.ok)throw Error(e.statusText);return e}var m=function(){var e=new URL(u.RC+u.LO,window.location.origin);return fetch(e).then(d).then((function(e){return e.json()})).then((function(e){return e}))},h=function(e){var t=new URL(u.RC+u.M4+"/".concat(e),window.location.origin);return fetch(t).then(d).then((function(e){return e.json()})).then((function(e){return e}))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(n=f(f({},n),{},{description:t.description}));var r=new URL(u.RC+u.M4+"/".concat(e,"/suggestions"),window.location.origin);return r.search=new URLSearchParams(n).toString(),fetch(r).then((function(e){if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(e){return e}))},y=function(){var e=i()(o().mark((function e(t){var n,r,a,i,l,s,p,d,m,h,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(l=t||{}).perPage,p=l.orderBy,d=l.orderHow,m=f(f({order_by:{display_name:"display_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[p]||"report_date",order_how:d||c.SortByDirection.desc,limit:s||-1},(null==t?void 0:t.page)&&{offset:(t.page-1)*t.perPage}),(null==t||null===(n=t.filters)||void 0===n?void 0:n.hostnameOrId)&&{display_name:t.filters.hostnameOrId}),h=new URL(u.RC+u.M4,window.location.origin),g=new URLSearchParams(m),null==t||null===(r=t.stateFilter)||void 0===r||r.forEach((function(e){g.append("state",e)})),null==t||null===(a=t.osFilter)||void 0===a||a.forEach((function(e){g.append("os",e)})),null==t||null===(i=t.groupFilter)||void 0===i||i.forEach((function(e){g.append("group_name",e)})),h.search=g.toString(),e.abrupt("return",fetch(h).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e,t){var n=new URL("".concat(u.RC).concat(u.M4,"/").concat(e,"/history"),window.location.origin),r=new URLSearchParams({limit:t});return n.search=r.toString(),fetch(n).then(d).then((function(e){return e.json()})).then((function(e){return e}))},b=function(){var e=i()(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(u.t5,window.location.origin),e.abrupt("return",fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"executiveReport"})}).then(d).then((function(e){return e.blob()})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},94778:(e,t,n)=>{"use strict";n.d(t,{Of:()=>o,Pn:()=>i,t9:()=>a,zz:()=>l});var r=n(30859),o=function(e){return{type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.S7)(e)}},a=function(e,t){return{type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.x2)(e,t)}},i=function(){return{type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.jL)()}},l=function(e){return{type:"CHANGE_SYSTEM_COLUMNS",payload:e}}},42480:()=>{},19527:()=>{},69331:()=>{},52361:()=>{},94616:()=>{}}]);