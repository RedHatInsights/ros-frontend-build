(self.webpackChunkros=self.webpackChunkros||[]).push([[3780,6752,279],{59094:(e,t,a)=>{"use strict";a.d(t,{g:()=>c});var r=a(44914),n=a.n(r),o=a(5556),i=a.n(o),s=a(69773),l=a(81538);const c=({inventoryId:e,cloudProvider:t,instanceType:a,idlingTime:r})=>{const o=[{label:"Provider",value:null===t?l.te:t},{label:"Instance type",value:null===a?l.te:a},{label:"Idling time",value:null===r?l.te:`${r}%`}];return n().createElement(s.DescriptionList,{className:"expanded-row",isCompact:!0,isHorizontal:!0},n().createElement(s.DescriptionListGroup,{id:e},o.map(((e,t)=>n().createElement(n().Fragment,{key:t},n().createElement(s.DescriptionListTerm,null,e.label),n().createElement(s.DescriptionListDescription,null,e.value))))))};c.propTypes={inventoryId:i().string,cloudProvider:i().string,instanceType:i().string,idlingTime:i().string}},49549:(e,t,a)=>{"use strict";a.d(t,{V:()=>c});var r=a(44914),n=a.n(r),o=a(41901),i=a(65769),s=a(37560),l=a(7769);const c=()=>n().createElement(r.Suspense,{fallback:n().createElement(o.Bullseye,null,n().createElement(i.Spinner,null))},n().createElement(s.A,{appId:"ros_zero_state",appName:"dashboard",module:"./AppZeroState",scope:"dashboard",ErrorComponent:n().createElement(l.A,null),app:"Resource_Optimization"}))},90558:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>le});var r=a(44914),n=a.n(r),o=a(5556),i=a.n(o),s=a(24209),l=a(16401),c=a(54226),p=a(53781),d=a(16477),u=a(85736),m=a(48900),g=a(35137),h=a(73349),f=a(59094),y=a(66108);const S=e=>{const{id:t,cloud_provider:a,instance_type:r,idling_time:o}=e;return n().createElement(f.g,{id:t,cloudProvider:a,instanceType:r,idlingTime:o})},E=(e,t)=>({...e,rows:e.rows.map((e=>({...e,isOpen:e.id===t.payload.id?t.payload.isOpen:e.isOpen})))}),w=({LOAD_ENTITIES_FULFILLED:e},t)=>(0,y.Lr)({[e]:e=>function(e,t){return{...t,columns:e,rows:t.rows.map((e=>({...e,children:S(e)}))),loaded:!0}}(t,e),EXPAND_ROW:E});var b=a(41526),C=a(81538),F=a(49549),_=a(55740),k=a(36683),v=a(82685),O=a(17369),x=a(31787),D=a(71859);const T=({modalColumns:e,isModalOpen:t,setModalOpen:a,saveColumns:o})=>{const[i,s]=(0,r.useState)(e),l=()=>{a(!1),s(e)};return n().createElement(O.Modal,{title:"Manage columns",onClose:l,isOpen:t,variant:"small",description:n().createElement(D.TextContent,null,n().createElement(D.Text,{component:D.TextVariants.p},"Selected categories will be displayed in the table"),n().createElement(x.Split,{hasGutter:!0},n().createElement(x.SplitItem,null,n().createElement(p.Button,{isInline:!0,onClick:()=>{s(i.map((e=>({...e,isChecked:!0}))))},variant:"link"},"Select all")),n().createElement(x.SplitItem,null,n().createElement(p.Button,{isInline:!0,onClick:()=>{s(i.map((e=>({...e,isChecked:e.isShownByDefault??!1}))))},variant:"link"},"Reset to default")))),actions:[n().createElement(p.Button,{key:"save",variant:"primary",onClick:()=>{a(!1),o(i)}},"Save"),n().createElement(p.Button,{key:"cancel",variant:"secondary",onClick:l},"Cancel")]},n().createElement(v.DataList,{"aria-label":"Column management table",id:"column-management-table",isCompact:!0},i.map(((e,t)=>n().createElement(v.DataListItem,{key:e.key},n().createElement(v.DataListItemRow,null,n().createElement(v.DataListCheck,{checked:e.isChecked,id:`checkbox-${t}`,onChange:()=>(e=>{const t=[...i],a={...t[e]};a.isChecked=!a.isChecked,t[e]=a,s(t)})(t),isDisabled:e.isDisabled}),n().createElement(v.DataListItemCells,{dataListCells:[n().createElement(v.DataListCell,{key:`column-table-item-${t}`},n().createElement("label",null,e.modalTitle))]})))))))};T.propTypes={modalColumns:i().arrayOf(i().object).isRequired,isModalOpen:i().bool.isRequired,setModalOpen:i().func.isRequired,saveColumns:i().func.isRequired};var R=a(48729);const A=["display_name","groups","os","performance_utilization.cpu","performance_utilization.memory","performance_utilization.max_io","number_of_suggestions","state","report_date"],N=["display_name","os","performance_utilization.cpu","performance_utilization.memory","performance_utilization.max_io","number_of_suggestions","state","cloud_provider","instance_type","idling_time","report_date","groups"],P=["performance_utilization.cpu","performance_utilization.memory","idling_time"],z={firstPageCount:16,otherPageCount:22},L={start:{variant:"info",title:"Generating data. Download may take a moment to start."},success:{variant:"success",title:"Export successful"},failure:{variant:"danger",autoDismiss:!1,title:"Export failed. Please try exporting again."}};var I=a(13460),B=a(2543),V=a(59202);const j=(e,t,a=!1)=>{const r=[];let n="No group";a&&(n="No workspace");const o="json"===t?N:A;return e.map((e=>{let a="json"===t?{}:[];o.map((r=>{let o;"groups"===r?(o=(0,B.get)(e,r,[]),o=0===o.length?n:o[0].name):(o=(0,B.get)(e,r,""),o=null===o||-1===o?"N/A":o.toString(),o="N/A"!==o&&P.includes(r)?`${o}%`:o,o="report_date"===r?(0,V.dateStringByType)("exact")(new Date(o)):o),"json"===t?a[r]=o:"pdf"===t&&a.push(o)})),r.push(a)})),r},$=(e,t=!1)=>{let a="";const r=t?"Groups:":"Workspaces:",n="\n",o=e?.stateFilter?.length>0,i=e?.hostnameOrId?.length>0,s=e?.osFilter?.length>0,l=e?.groupFilter?.length>0;return(o||i||s||l)&&(a=`${n}Filters applied${n}`,a=i?a.concat(`Name: ${e.hostnameOrId}${n}`):a,a=o?a.concat(`State: ${e.stateFilter.toString()}${n}`):a,a=s?a.concat(`Operating System: ${e.osFilter.sort().toString()}${n}`):a,a=l?a.concat(`${r} ${e.groupFilter.toString()}`):a),a},U=()=>`resource_optimization--${(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]}-utc`;a(29160);var H=a(69627),W=a(48337);const M=H.vv.create({bodyCell:{textAlign:"left",fontSize:8,paddingBottom:2,paddingTop:2,paddingLeft:2,flex:1},headerCell:{textAlign:"left",fontSize:8,flex:1},systemNameCell:{textAlign:"left",fontSize:8,flex:2.5,paddingBottom:2,paddingTop:2,paddingRight:4},lastReportedCell:{textAlign:"left",fontSize:8,flex:1.2,paddingBottom:2,paddingTop:2,paddingLeft:2},headerStyle:{display:"flex",flexDirection:"row",justifyContent:"space-around"},rowStyle:{display:"flex",flexDirection:"row",justifyContent:"center"},execHeading:{textAlign:"left",fontSize:10,color:"#C9190B",marginBottom:4,marginTop:10},occurrenceHeading:{textAlign:"left",fontSize:10,color:"#C9190B",marginTop:12,marginBottom:-4},execInfoText:{flex:1,textAlign:"right",fontSize:7,color:"#6A6E73"},instanceTypeHeading:{textAlign:"left",fontSize:10,color:"#C9190B",marginTop:20},instanceTypeHeadingFirst:{textAlign:"left",fontSize:10,color:"#C9190B"},instanceTypeDesc:{fontSize:10,textAlign:"left",marginBottom:4},flexRow:{display:"flex",flexDirection:"row"},tableRowBackground:{backgroundColor:W.Ay.value},instanceTableHeading:{fontSize:10,color:"#6A6E73",paddingBottom:4,fontWeight:"bold"},bold:{fontFamily:"Helvetica-Bold",fontWeight:700}}),G=({value:e,style:t,key:a})=>n().createElement(H.EY,{key:a,style:t},e),Z=["Name","Group","OS","CPU utilization","Memory utilization","I/O utilization","Suggestions","State","Last reported"],q=({data:e,page:t,isWorkSpaceEnabled:a=!1})=>{const o=((e=!1)=>(e&&Z.splice(1,1,"Workspace"),Z.map(((e,t)=>{let a="Name"===e?[M.systemNameCell]:"Last reported"===e?[M.lastReportedCell]:[M.headerCell];return G({value:e,style:a,key:`${t}-${e}`})}))))(a),i=e.map((e=>e.map(((e,t)=>{const a=Z.indexOf("Name"),r=Z.indexOf("Last reported");let n=t===a?[M.systemNameCell]:t===r?[M.lastReportedCell]:[M.bodyCell];return G({value:e,style:n,key:`${t}-${e}`})}))));return n().createElement(r.Fragment,{key:t},n().createElement(R.wn,null,n().createElement(R.VP,null,n().createElement(R.XI,{withHeader:!0,rows:[o,...i]}))))};q.propTypes={data:i().array,page:i().number,isWorkSpaceEnabled:i().bool},G.propTypes={value:i().string,style:i().array,key:i().string};const Y=({data:e,totalSystems:t,filterText:a,isWorkSpaceEnabled:o})=>n().createElement(r.Fragment,{key:"first-section"},n().createElement(R.wn,null,n().createElement(R.VP,null,`This report identified ${t} ${t>1?"RHEL systems":"RHEL system"}. ${a}`)),n().createElement(q,{data:e,page:0,isWorkSpaceEnabled:o}));Y.propTypes={data:i().array,totalSystems:i().number,filterText:i().string,isWorkSpaceEnabled:i().bool};var X=a(11830);const Q=({filters:e,orderBy:t,orderHow:a,isWorkSpaceEnabled:o,...i})=>{const s=U(),l=(0,m.wA)(),{start:c,success:p,failure:d}=L;return(0,r.useEffect)((()=>{l((0,X.z8)(c))}),[]),n().createElement("div",null,n().createElement(R.fd,{...i,reportName:"Insights Resource Optimization Systems Report",type:"",fileName:`${s}.pdf`,size:"A4",orientation:"landscape",allPagesHaveTitle:!1,asyncFunction:()=>(async(e,t,a)=>{const{firstPageCount:r,otherPageCount:i}=z,s={filters:e,stateFilter:e.stateFilter,osFilter:e.osFilter,groupFilter:e.groupFilter,orderBy:t,orderHow:a};let c;try{c=await(0,I.zu)(s)}catch{return l((0,X.SP)()),l((0,X.z8)(d)),[]}const u=j(c.data,"pdf",o),m={data:u.splice(0,r),totalSystems:c?.meta?.count,filterText:$(e,o),isWorkSpaceEnabled:o},g=[];for(;u.length>0;)g.push(u.splice(0,i));return l((0,X.SP)()),l((0,X.z8)(p)),[n().createElement(Y,{key:"first-page",...m}),...g.map(((e,t)=>n().createElement(q,{key:t,data:e,page:t+1,isWorkSpaceEnabled:o})))]})(e,t,a)}))};Q.propTypes={filters:i().object,orderBy:i().string,orderHow:i().string,isWorkSpaceEnabled:i().bool};var K=a(64684);var J=a(54684),ee=a.n(J);const te=({isDisabled:e})=>{const[t,a]=(0,r.useState)(!1),o=(0,m.wA)(),{start:i,success:s,failure:l}=L;return n().createElement(r.Fragment,null,n().createElement(p.Button,{variant:"link",icon:n().createElement(ee(),null),iconPosition:"left",onClick:()=>(async()=>{const e=`Resource-Optimization-Executive-Report--${(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]}-utc.pdf`;try{a(!0),o((0,X.z8)(i));const t=await(0,I.BA)(),r=window.URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=e,document.body.appendChild(n),n.click(),n.remove(),o((0,X.SP)()),o((0,X.z8)(s)),a(!1)}catch(e){o((0,X.SP)()),o((0,X.z8)(l)),a(!1)}})(),isDisabled:t||e,className:"downloadButtonOverride"},t?"Loading...":"Download executive report"))};te.propTypes={isDisabled:i().bool};var ae=a(20881),re=a(16031),ne=a(16885),oe=a(28125),ie=a(31816);class se extends n().Component{constructor(e){super(e),this.state={perPage:C.EK,orderBy:"report_date",orderDirection:u.l.desc,stateFilterValue:[],isColumnModalOpen:!1,exportSystemsPDF:!1,nameFilterValue:"",groupFilterValue:[],disableExport:!0,osFilterValue:[],OSFObject:{}},this.sortingHeader={display_name:"display_name",groups:"group_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"},this.chunkSize=50,this.inventory=n().createRef(),this.fetchSystems=this.fetchSystems.bind(this)}async componentDidMount(){const e=this.props.chrome;e?.hideGlobalFilter?.(!0),e?.appAction("ros-systems"),await this.props.isROSConfigured(),this.processQueryParams(),this.processFilterValues(),this.props.isWorkSpaceEnabled&&C.bA.splice(1,1,{key:"groups",title:"Workspace",modalTitle:"Workspace",dataLabel:"Workspace",renderFunc:e=>(0,ie.eT)(e),isChecked:!0,isDisabled:!1,isShownByDefault:!0,props:{isStatic:!0}})}processQueryParams(){const{location:e}=this.props,t=new URLSearchParams(e.search),a=t.get(C.Ng);"true"===t.get(C.U1)?this.setState({stateFilterValue:["Waiting for data"]}):"true"===a&&this.setState({stateFilterValue:["Undersized","Oversized","Under pressure","Idling"]})}processFilterValues(){let e={label:"Operating system"};e.type=re.jH.checkbox,e.filterValues={},this.fetchSystems({perPage:-1,orderBy:"os",orderHow:u.l.desc}).then((t=>{e.filterValues.items=Array.from(new Set(t.data.reduce(((e,t)=>(t.os&&e.push(t.os),e)),[]))).map((e=>({label:e,value:e.split(" ")[1]}))),0===e.filterValues.items.length&&(e.filterValues.items=[{label:"No versions available"}],e.type=re.jH.group),this.setState({OSFObject:e})}))}clearStateQueryParams(){const{location:e}=this.props,t=new URL(window.location),a=new URLSearchParams(e.search),r=a.get(C.Ng);(a.get(C.U1)||r)&&(a.delete(C.Ng),a.delete(C.U1),window.history.replaceState(null,"",`${t.origin}${t.pathname}?${a.toString()}${window.location.hash}`))}async fetchSystems(e){let t={limit:e.perPage,...e?.page&&{offset:(e.page-1)*e.perPage},order_by:e.orderBy||this.state.orderBy,order_how:e.orderHow||this.state.orderDirection,...e?.filters?.hostnameOrId&&{display_name:e.filters.hostnameOrId}},a=new URL(C.ZA+C.jC,window.location.origin),r=new URLSearchParams(t);return e?.stateFilter?.forEach((e=>{r.append("state",e)})),e?.osFilter?.forEach((e=>{r.append("os",e)})),e?.groupFilter?.forEach((e=>{r.append("group_name",e)})),a.search=r.toString(),fetch(a).then((e=>{if(!e.ok)throw Error(e.statusText);return e})).then((e=>e.json()))}chunkIdsArray(e){let t=[];for(;e.length;)t.push(e.splice(0,this.chunkSize));return t}async fetchInventoryDetails(e,t){let a=[];if(t.per_page>50&&e.length>50)(await this.multipleGetEntitiesRequests(e,t)).map((e=>{a.push(...e)}));else{const r=await(this.state.getEntities?.(e,t,!1));a=r.results}return a}async multipleGetEntitiesRequests(e,t){const a=this.chunkIdsArray(e);return Promise.all(a.map((async e=>(await(this.state.getEntities?.(e,t,!1))).results))).then((e=>e))}updateStateFilter=e=>{this.setState({stateFilterValue:e})};updateOSFilter=e=>{this.setState({osFilterValue:e})};onDeleteFilters=(e,t)=>{const a=t.filter((e=>"State"===e.category)),r=t.filter((e=>"Operating System"===e.category));if(a.length>0){this.clearStateQueryParams();const e=a[0]?.chips.map((e=>e?.name)),t=this.state.stateFilterValue.filter((t=>!e.includes(t)));this.setState({stateFilterValue:t})}if(r.length>0){const e=r[0]?.chips.map((e=>e?.name)),t=this.state.osFilterValue.filter((t=>!e.includes(t)));this.setState({osFilterValue:t})}};getActiveFilterConfig=()=>{const e=this.state.stateFilterValue.map((e=>({name:e}))),t=this.state.osFilterValue.map((e=>({name:e}))),a=[];return e.length>0&&a.push({category:"State",chips:e}),t.length>0&&a.push({category:"Operating System",chips:t}),a};setColumnModalOpen=e=>{this.setState({isColumnModalOpen:e})};getActiveColumns=()=>{const{columns:e}=this.props;return e.filter((e=>e.isChecked))};setExportSystemsPDF(e){this.setState({exportSystemsPDF:e})}onExportOptionSelect(e){const{stateFilterValue:t,nameFilterValue:a,osFilterValue:r,orderBy:n,orderDirection:o}=this.state,i={stateFilter:t,hostnameOrId:a,osFilter:r},{addNotification:s,clearNotifications:l}=this.props;(async(e,t,a,r,n,o,i)=>{const s=U(),{start:l,success:c,failure:p}=L;n(l);const d={filters:t,stateFilter:t.stateFilter,osFilter:t.osFilter,orderBy:a,orderHow:r};try{const t=await(0,I.zu)(d),a="json"===e?((e,t)=>{const a=j(e,"json",t);return JSON.stringify(a)})(t.data,i):((e,t)=>{const a=j(e,"json",t),r=Object.keys(a[0]);return[r.join(","),...a.map((e=>r.map((t=>e[t])).join(",")))].join("\r\n")})(t.data,i);(0,K.downloadFile)(a,s,e),o(),n(c)}catch(e){throw o(),n(p),`${e}`}})(e,i,n,o,(e=>s(e)),(()=>l()),this.props.isWorkSpaceEnabled)}renderConfigStepsOrTable(){const{state:e}=C.Ui,t=this.getActiveColumns(),{exportSystemsPDF:a,stateFilterValue:r,nameFilterValue:o,osFilterValue:i,groupFilterValue:u,orderBy:m,orderDirection:f,disableExport:y,isColumnModalOpen:S,OSFObject:E}=this.state,b={items:[{label:e.label,type:e.type,value:"checkbox-state",filterValues:{items:e.filterValues.items,onChange:(e,t)=>this.updateStateFilter(t),value:r}},{label:E.label,type:E.type,value:"checkbox-os",filterValues:{items:E.filterValues?.items,onChange:(e,t)=>this.updateOSFilter(t),value:i}}]};return this.props.showConfigSteps?n().createElement(F.V,null):n().createElement(n().Fragment,null,n().createElement(s.A,{className:"ros-page-header"},n().createElement(l.A,{title:"Resource Optimization"}),n().createElement(te,{isDisabled:this.state.disableExport})),n().createElement(c.Ay,null,n().createElement(d.Card,{className:"pf-t-light  pf-m-opaque-100"},n().createElement(d.CardBody,null,n().createElement(T,{isModalOpen:S,setModalOpen:this.setColumnModalOpen,modalColumns:this.props.columns,saveColumns:e=>this.props.changeSystemColumns({columns:e})}),n().createElement(g.A,{disableDefaultColumns:!0,ref:this.inventory,hasCheckbox:!1,tableProps:{canSelectAll:!1,className:"ros-systems-table"},variant:"compact",hideFilters:{all:!0,name:!1,hostGroupFilter:!1},autoRefresh:!0,customFilters:{stateFilter:r,osFilter:i},columns:t,getEntities:async(e,t)=>{this.setState((()=>({orderBy:t.orderBy,orderDirection:t.orderDirection,nameFilterValue:t.filters?.hostnameOrId,groupFilterValue:t?.filters?.hostGroupFilter})));const a=await this.fetchSystems({page:t.page,perPage:t.per_page,orderBy:this.sortingHeader[t.orderBy],orderHow:t.orderDirection,filters:t.filters,stateFilter:t.stateFilter,osFilter:t.osFilter,groupFilter:t?.filters?.hostGroupFilter}),r=(a.data||[]).map((({inventory_id:e})=>e)),n=await this.fetchInventoryDetails(r,{...t,orderBy:void 0,orderDirection:void 0,page:C.KL,hasItems:!0}),o=0===a?.meta?.count;return this.setState((()=>({disableExport:o}))),{results:a.data.map((e=>{const t=n.find((({id:t})=>t===e.inventory_id));return{...t,...t?{isDeleted:!1}:{id:e.inventory_id,isDeleted:!0},...e}})),total:a.meta.count,page:t.page,per_page:t.per_page}},onLoad:({mergeWithEntities:e,INVENTORY_ACTION_TYPES:t,api:a})=>{this.setState({getEntities:a?.getEntities}),(0,h.kz)({...e(w(t,C.bA))}),this.props.setSort(m,f,"CHANGE_SORT")},expandable:"true",filterConfig:b,activeFiltersConfig:{filters:this.getActiveFilterConfig(),onDelete:this.onDeleteFilters},actionsConfig:{actions:["",{label:"Manage columns",onClick:()=>this.setColumnModalOpen(!0)}]},exportConfig:{isDisabled:y,extraItems:[n().createElement("li",{key:"pdf-button-item",role:"menuitem"},n().createElement(p.Button,{key:"pdf-download-button",variant:"none",className:"pf-v5-c-dropdown pf-v5-c-dropdown__menu-item",onClick:()=>this.setExportSystemsPDF(!0)},"Export to PDF"))],ouiaId:"export",onSelect:(e,t)=>this.onExportOptionSelect(t)},onExpandClick:(e,t,a,{id:r})=>this.props.expandRow(r,a,"EXPAND_ROW")}),a&&n().createElement(Q,{showButton:!1,onSuccess:()=>this.setExportSystemsPDF(!1),filters:{stateFilter:r,hostnameOrId:o,osFilter:i,groupFilter:u},orderBy:m,orderHow:f,isWorkSpaceEnabled:this.props.isWorkSpaceEnabled})))))}render(){return n().createElement(n().Fragment,null,n().createElement(_.d.Consumer,null,(e=>!1===e.permissions.hasRead?n().createElement(k.A,{serviceName:C.OX}):this.renderConfigStepsOrTable())))}}se.propTypes={expandRow:i().func,setSort:i().func,isROSConfigured:i().func,showConfigSteps:i().bool,location:i().object,columns:i().array,changeSystemColumns:i().func,addNotification:i().func,clearNotifications:i().func,chrome:i().object,isWorkSpaceEnabled:i().bool};const le=(0,m.Ng)(((e,t)=>({showConfigSteps:e.isConfiguredReducer?.showConfigSteps,columns:e.systemColumnsReducer.columns,...t})),(function(e){return{expandRow:(t,a,r)=>e({type:r,payload:{id:t,isOpen:a}}),setSort:(t,a,r)=>e({type:r,payload:{key:t,direction:a}}),isROSConfigured:()=>e((0,b.NI)()),changeSystemColumns:t=>e((0,b.RZ)(t)),addNotification:t=>e((0,X.z8)(t)),clearNotifications:()=>e((0,X.SP)())}}))((e=>{const t=(0,ae.A)(),a=(0,ne.useLocation)(),r=(e=>{const{flagsReady:t}=(0,oe.useFlagsStatus)(),a=(0,oe.useFlag)("platform.rbac.groups-to-workspaces-rename");return!!t&&a})();return n().createElement(se,{...e,chrome:t,isWorkSpaceEnabled:r,location:a})}))},13460:(e,t,a)=>{"use strict";a.d(t,{BA:()=>d,DE:()=>s,c:()=>u,ne:()=>i,yj:()=>l,yz:()=>p,zu:()=>c});var r=a(85736),n=a(81538);function o(e){if(!e.ok)throw Error(e.statusText);return e}const i=()=>{let e=new URL(n.ZA+n.Vg,window.location.origin);return fetch(e).then(o).then((e=>e.json())).then((e=>e))},s=e=>{let t=new URL(n.ZA+n.jC+`/${e}`,window.location.origin);return fetch(t).then(o).then((e=>e.json())).then((e=>e))},l=(e,t={})=>{let a={limit:t.perPage,offset:(t.page-1)*t.perPage};t.description&&t.description.trim()&&(a={...a,description:t.description});let r=new URL(n.ZA+n.jC+`/${e}/suggestions`,window.location.origin);return r.search=new URLSearchParams(a).toString(),fetch(r).then((e=>{if(!e.ok&&404===e.status)return{hasError:!0};if(!e.ok)throw Error(e.statusText);return e.json()})).then((e=>e))},c=async e=>{const{perPage:t,orderBy:a,orderHow:o}=e||{};let i={order_by:{display_name:"display_name",groups:"group_name",os:"os","performance_utilization.cpu":"cpu","performance_utilization.memory":"memory","performance_utilization.max_io":"max_io",number_of_suggestions:"number_of_suggestions",state:"state",report_date:"report_date"}[a]||"report_date",order_how:o||r.l.desc,limit:t||-1,...e?.page&&{offset:(e.page-1)*e.perPage},...e?.filters?.hostnameOrId&&{display_name:e.filters.hostnameOrId}},s=new URL(n.ZA+n.jC,window.location.origin),l=new URLSearchParams(i);return e?.stateFilter?.forEach((e=>{l.append("state",e)})),e?.osFilter?.forEach((e=>{l.append("os",e)})),e?.groupFilter?.forEach((e=>{l.append("group_name",e)})),s.search=l.toString(),fetch(s).then((e=>{if(!e.ok)throw Error(e.statusText);return e})).then((e=>e.json()))},p=(e,t)=>{let a=new URL(`${n.ZA}${n.jC}/${e}/history`,window.location.origin),r=new URLSearchParams({limit:t});return a.search=r.toString(),fetch(a).then(o).then((e=>e.json())).then((e=>e))},d=async()=>{const e=new URL(n.X9,window.location.origin);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:"ros",template:"executiveReport"})}).then(o).then((e=>e.blob()))},u=async e=>{const{page:t,perPage:a,activeSortColumnKey:r,activeSortDirection:i}=e||{};let s=new URL(n.ZA+n.XQ,window.location.origin),l={page:t,per_page:a,order_by:r,order_how:i,...e?.instanceTypeName&&{instance_type:e.instanceTypeName}},c=new URLSearchParams(l);return s.search=c.toString(),fetch(s).then(o).then((e=>e.json())).then((e=>e))}},41526:(e,t,a)=>{"use strict";a.d(t,{NI:()=>i,RZ:()=>s,ds:()=>o,iS:()=>l,kZ:()=>n});var r=a(13460);const n=e=>({type:"LOAD_ROS_SYSTEM_INFO",payload:(0,r.DE)(e)}),o=(e,t)=>({type:"FETCH_SYSTEM_RECOMMENDATIONS_LIST",payload:(0,r.yj)(e,t)}),i=()=>({type:"LOAD_IS_CONFIGURED_INFO",payload:(0,r.ne)()}),s=e=>({type:"CHANGE_SYSTEM_COLUMNS",payload:e}),l=e=>({type:"LOAD_SUGGESTED_INSTANCE_TYPES",payload:(0,r.c)(e)})},39575:()=>{},88233:()=>{},36882:()=>{},66403:()=>{},16789:()=>{},497:()=>{},4325:()=>{},95067:()=>{},71436:()=>{},80875:()=>{},48577:()=>{},43502:()=>{},17627:()=>{},75189:()=>{},89347:()=>{},11902:()=>{},7940:()=>{},83770:()=>{},61858:()=>{},26100:()=>{},530:()=>{},86893:()=>{},43619:()=>{},51662:()=>{},92004:()=>{},74895:()=>{},7302:()=>{},59709:()=>{},63701:()=>{},71036:()=>{},53188:()=>{},86151:()=>{},51225:()=>{},40819:()=>{},19505:()=>{},87089:()=>{},26078:()=>{},97239:()=>{},16049:()=>{},16440:()=>{},49816:()=>{},42686:()=>{},53222:()=>{},50545:()=>{},23091:()=>{},98497:()=>{},78716:()=>{},49025:()=>{},5637:()=>{},71453:()=>{},7458:()=>{},13409:()=>{},81237:()=>{},86073:()=>{},67879:()=>{},87034:()=>{},70043:()=>{},28195:()=>{},45532:()=>{},91181:()=>{},50016:()=>{},81117:()=>{},56678:()=>{},41723:()=>{},21289:()=>{},2580:()=>{},36752:()=>{},12580:()=>{},85586:()=>{},70364:()=>{},83696:()=>{},50477:()=>{},15791:()=>{},61093:()=>{},15340:()=>{},79838:()=>{}}]);
//# sourceMappingURL=../sourcemaps/RosPage.fd4a41df7847f4a470c52d6d283bb3f9.js.map