{"version":3,"file":"js/RosSystemDetail.52a078aac17506be6eed.js","mappings":"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","sources":["webpack:///./src/store/entityDetailReducer.js","webpack:///./src/Components/RecommendationRating/RecommendationRating.js","webpack:///./src/Routes/RosSystemDetail/RosSystemDetail.js"],"sourcesContent":["import { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport SystemDetail from '../Components/SystemDetail/SystemDetail';\n\nconst defaultState = { loaded: false };\n\nconst entityLoaded = (state) => {\n    return {\n        ...state,\n        loaded: true,\n        activeApps: [\n            {\n                title: 'Resource optimization',\n                name: 'resource optimization',\n                component: SystemDetail\n            }\n        ]\n    };\n};\n\nexport const entityDetailReducer = ({ LOAD_ENTITY_FULFILLED }) => applyReducerHash(\n    {\n        [LOAD_ENTITY_FULFILLED]: entityLoaded\n    },\n    defaultState\n);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from '@patternfly/react-core';\nimport { OutlinedThumbsUpIcon } from '@patternfly/react-icons';\nimport { OutlinedThumbsDownIcon } from '@patternfly/react-icons';\nimport { ThumbsUpIcon } from '@patternfly/react-icons';\nimport { ThumbsDownIcon } from '@patternfly/react-icons';\n\nimport './RecommendationRating.scss';\nimport {\n    ROS_API_ROOT,\n    RECOMMENDATION_RATING_API,\n    NEUTRAL_FEEDBACK,\n    POSITIVE_FEEDBACK,\n    NEGATIVE_FEEDBACK  } from '../../constants';\n\nconst RecommendationRating = ({ system }) => {\n    const [rating, setRating] = useState(system.rating);\n    const [submitted, setSubmitted] = useState(false);\n    const updateRecommendationRating = async (newRating) => {\n        const calculatedRating = rating === newRating ? NEUTRAL_FEEDBACK : newRating;\n        try {\n\n            // POST request using fetch with error handling\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    inventory_id: system.inventoryId, /* eslint-disable-line camelcase */\n                    rating: calculatedRating\n                })\n            };\n\n            await fetch(`${ROS_API_ROOT}${RECOMMENDATION_RATING_API}`, requestOptions);\n            setRating(calculatedRating);\n            setSubmitted(true);\n            setTimeout(() => setSubmitted(false), 3000);\n        } catch (error) {\n            console.error(error); // eslint-disable-line no-console\n        }\n    };\n\n    return <span className='ratingSpanOverride'>\n        Is this suggestion helpful?\n        <Button\n            variant=\"plain\"\n            aria-label=\"thumbs-up\"\n            onClick={() => updateRecommendationRating(POSITIVE_FEEDBACK)}\n            ouiaId=\"thumbsUp\">\n            {rating === POSITIVE_FEEDBACK ? <ThumbsUpIcon className='like' size='sm' /> :\n                <OutlinedThumbsUpIcon size='sm' />}\n        </Button>\n        <Button\n            variant=\"plain\"\n            aria-label=\"thumbs-down\"\n            onClick={() => updateRecommendationRating(NEGATIVE_FEEDBACK)}\n            ouiaId=\"thumbsDown\">\n            {rating === NEGATIVE_FEEDBACK ? <ThumbsDownIcon className='dislike' size='sm' /> :\n                <OutlinedThumbsDownIcon size='sm' />}\n        </Button>\n        {submitted && 'Thank you for your feedback!'}\n    </span>;\n};\n\nRecommendationRating.propTypes = {\n    system: PropTypes.object\n};\n\nexport default RecommendationRating;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Grid, GridItem, Breadcrumb, BreadcrumbItem } from '@patternfly/react-core';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { PageHeader } from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { InventoryDetailHead, AppInfo, DetailWrapper } from '@redhat-cloud-services/frontend-components/Inventory';\nimport { register } from '../../store';\nimport { loadSystemInfo } from '../../store/actions';\nimport { entityDetailReducer } from '../../store/entityDetailReducer';\nimport './ros-details-page.scss';\nimport { ExpandedRow } from '../../Components/RosTable/ExpandedRow';\nimport RecommendationRating from '../../Components/RecommendationRating/RecommendationRating';\nimport { NotAuthorized } from '@redhat-cloud-services/frontend-components/NotAuthorized';\nimport { PermissionContext } from '../../App';\n\nclass RosSystemDetail extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inventoryId: this.props.match.params.inventoryId\n        };\n    }\n\n    async componentDidMount() {\n        insights.chrome?.hideGlobalFilter?.(true);\n        insights.chrome.appAction('system-detail');\n        await this.props.loadSystemInfo(this.state.inventoryId);\n        document.title = this.props.rosSystemInfo.display_name;\n    }\n\n    renderChildrenNode() {\n        if (this.props.rosSystemInfo) {\n            const {\n                cloud_provider: cloudProvider,\n                instance_type: instanceType,\n                idling_time: idlingTime, io_wait: ioWait,\n                rating\n            } = this.props.rosSystemInfo;\n            const { inventoryId } = this.props.match.params;\n            return (\n                <Grid className='ros-system-info'>\n                    <GridItem>\n                        <ExpandedRow\n                            { ...{ cloudProvider, instanceType, idlingTime, ioWait, inventoryId } }\n                        />\n                    </GridItem>\n                    <GridItem>\n                        <RecommendationRating system={ { ...{ rating, inventoryId } } } />\n                    </GridItem>\n                </Grid>\n            );\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        const entity = this.props.entity;\n        return (\n            <React.Fragment>\n                <PermissionContext.Consumer>\n                    { value =>\n                        value.permissions.systemsRead === false\n                            ? <NotAuthorized serviceName='Resource Optimization'/>\n                            : <DetailWrapper\n                                onLoad={({ mergeWithDetail, INVENTORY_ACTION_TYPES }) => {\n                                    register(mergeWithDetail(\n                                        entityDetailReducer(INVENTORY_ACTION_TYPES)\n                                    ));\n                                }}\n                                className='rosDetailWrapper'\n                            >\n                                <PageHeader>\n                                    <Breadcrumb ouiaId=\"system-detail\">\n                                        <BreadcrumbItem>\n                                            <Link to='/'>Resource Optimization</Link>\n                                        </BreadcrumbItem>\n                                        <BreadcrumbItem isActive>\n                                            <div className=\"ins-c-inventory__detail--breadcrumb-name\">\n                                                { entity ? entity.display_name : null }\n                                            </div>\n                                        </BreadcrumbItem>\n                                    </Breadcrumb>\n                                    <InventoryDetailHead\n                                        hideBack\n                                        showDelete={ false }\n                                        hideInvDrawer\n                                    />\n                                    { this.renderChildrenNode() }\n                                </PageHeader>\n                                <Main>\n                                    <Grid gutter=\"md\">\n                                        <GridItem span={12}>\n                                            <AppInfo showTags fallback=\"\" />\n                                        </GridItem>\n                                    </Grid>\n                                </Main>\n                            </DetailWrapper>\n                    }\n                </PermissionContext.Consumer>\n            </React.Fragment>\n        );\n    }\n};\n\nRosSystemDetail.propTypes = {\n    match: PropTypes.any,\n    entity: PropTypes.object,\n    loading: PropTypes.bool,\n    rosSystemInfo: PropTypes.object,\n    loadSystemInfo: PropTypes.func\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        entity: state.entityDetails && state.entityDetails.entity,\n        loading: state.systemDetailReducer?.loading,\n        rosSystemInfo: state.systemDetailReducer?.systemInfo,\n        ...props\n    };\n};\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        loadSystemInfo: (uuid) => dispatch(loadSystemInfo(uuid))\n    };\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps)(RosSystemDetail)\n);\n"],"names":["defaultState","loaded","entityLoaded","state","activeApps","title","name","component","SystemDetail","RecommendationRating","system","useState","rating","setRating","submitted","setSubmitted","updateRecommendationRating","newRating","calculatedRating","NEUTRAL_FEEDBACK","requestOptions","method","headers","body","JSON","stringify","inventory_id","inventoryId","fetch","ROS_API_ROOT","RECOMMENDATION_RATING_API","setTimeout","console","error","className","Button","variant","onClick","POSITIVE_FEEDBACK","ouiaId","size","NEGATIVE_FEEDBACK","propTypes","PropTypes","RosSystemDetail","props","match","params","insights","chrome","hideGlobalFilter","appAction","this","loadSystemInfo","document","rosSystemInfo","display_name","cloudProvider","cloud_provider","instanceType","instance_type","idlingTime","idling_time","ioWait","io_wait","Grid","GridItem","ExpandedRow","entity","value","permissions","systemsRead","NotAuthorized","serviceName","DetailWrapper","onLoad","mergeWithDetail","INVENTORY_ACTION_TYPES","register","LOAD_ENTITY_FULFILLED","applyReducerHash","entityDetailReducer","PageHeader","Breadcrumb","BreadcrumbItem","Link","to","isActive","InventoryDetailHead","hideBack","showDelete","hideInvDrawer","renderChildrenNode","Main","gutter","span","AppInfo","showTags","fallback","React","loading","withRouter","connect","entityDetails","systemDetailReducer","systemInfo","dispatch","uuid"],"sourceRoot":""}