{"version":3,"sources":["webpack:///./src/store/entityDetailReducer.js","webpack:///./src/Components/RecommendationRating/RecommendationRating.js","webpack:///./src/Routes/RosSystemDetail/RosSystemDetail.js","webpack:///./src/Components/RecommendationRating/RecommendationRating.scss","webpack:///./src/Routes/RosSystemDetail/ros-details-page.scss","webpack:///./src/Components/RecommendationRating/RecommendationRating.scss?8ee2","webpack:///./src/Routes/RosSystemDetail/ros-details-page.scss?7fba"],"names":["defaultState","loaded","entityLoaded","state","activeApps","title","name","component","SystemDetail","RecommendationRating","system","useState","rating","setRating","submitted","setSubmitted","updateRecommendationRating","newRating","calculatedRating","NEUTRAL_FEEDBACK","requestOptions","method","headers","body","JSON","stringify","inventory_id","inventoryId","fetch","ROS_API_ROOT","RECOMMENDATION_RATING_API","setTimeout","console","error","className","Button","variant","aria-label","onClick","POSITIVE_FEEDBACK","ouiaId","size","NEGATIVE_FEEDBACK","propTypes","PropTypes","RosSystemDetail","props","match","params","insights","chrome","hideGlobalFilter","appAction","this","loadSystemInfo","rosSystemInfo","cloudProvider","cloud_provider","instanceType","instance_type","idlingTime","idling_time","ioWait","io_wait","Grid","GridItem","ExpandedRow","entity","value","permissions","systemsRead","NotAuthorized","serviceName","DetailWrapper","onLoad","mergeWithDetail","INVENTORY_ACTION_TYPES","register","LOAD_ENTITY_FULFILLED","applyReducerHash","entityDetailReducer","PageHeader","Breadcrumb","BreadcrumbItem","Link","to","isActive","display_name","InventoryDetailHead","hideBack","showDelete","hideInvDrawer","renderChildrenNode","Main","gutter","span","AppInfo","showTags","fallback","React","loading","withRouter","connect","entityDetails","systemDetailReducer","systemInfo","dispatch","uuid","exports","___CSS_LOADER_API_IMPORT___","push","module","id","update","hot","invalidate","oldLocals","accept","a","b","isNamedExport","p","isEqualLocals","dispose"],"mappings":"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","file":"js/RosSystemDetail.8c49e07054ea3b6f989a.js","sourcesContent":["import { applyReducerHash } from '@redhat-cloud-services/frontend-components-utilities/ReducerRegistry';\nimport SystemDetail from '../Components/SystemDetail/SystemDetail';\n\nconst defaultState = { loaded: false };\n\nconst entityLoaded = (state) => {\n    return {\n        ...state,\n        loaded: true,\n        activeApps: [\n            {\n                title: 'Resource optimization',\n                name: 'resource optimization',\n                component: SystemDetail\n            }\n        ]\n    };\n};\n\nexport const entityDetailReducer = ({ LOAD_ENTITY_FULFILLED }) => applyReducerHash(\n    {\n        [LOAD_ENTITY_FULFILLED]: entityLoaded\n    },\n    defaultState\n);\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from '@patternfly/react-core';\nimport { OutlinedThumbsUpIcon } from '@patternfly/react-icons';\nimport { OutlinedThumbsDownIcon } from '@patternfly/react-icons';\nimport { ThumbsUpIcon } from '@patternfly/react-icons';\nimport { ThumbsDownIcon } from '@patternfly/react-icons';\n\nimport './RecommendationRating.scss';\nimport {\n    ROS_API_ROOT,\n    RECOMMENDATION_RATING_API,\n    NEUTRAL_FEEDBACK,\n    POSITIVE_FEEDBACK,\n    NEGATIVE_FEEDBACK  } from '../../constants';\n\nconst RecommendationRating = ({ system }) => {\n    const [rating, setRating] = useState(system.rating);\n    const [submitted, setSubmitted] = useState(false);\n    const updateRecommendationRating = async (newRating) => {\n        const calculatedRating = rating === newRating ? NEUTRAL_FEEDBACK : newRating;\n        try {\n\n            // POST request using fetch with error handling\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    inventory_id: system.inventoryId, /* eslint-disable-line camelcase */\n                    rating: calculatedRating\n                })\n            };\n\n            await fetch(`${ROS_API_ROOT}${RECOMMENDATION_RATING_API}`, requestOptions);\n            setRating(calculatedRating);\n            setSubmitted(true);\n            setTimeout(() => setSubmitted(false), 3000);\n        } catch (error) {\n            console.error(error); // eslint-disable-line no-console\n        }\n    };\n\n    return <span className='ratingSpanOverride'>\n        Is this suggestion helpful?\n        <Button\n            variant=\"plain\"\n            aria-label=\"thumbs-up\"\n            onClick={() => updateRecommendationRating(POSITIVE_FEEDBACK)}\n            ouiaId=\"thumbsUp\">\n            {rating === POSITIVE_FEEDBACK ? <ThumbsUpIcon className='like' size='sm' /> :\n                <OutlinedThumbsUpIcon size='sm' />}\n        </Button>\n        <Button\n            variant=\"plain\"\n            aria-label=\"thumbs-down\"\n            onClick={() => updateRecommendationRating(NEGATIVE_FEEDBACK)}\n            ouiaId=\"thumbsDown\">\n            {rating === NEGATIVE_FEEDBACK ? <ThumbsDownIcon className='dislike' size='sm' /> :\n                <OutlinedThumbsDownIcon size='sm' />}\n        </Button>\n        {submitted && 'Thank you for your feedback!'}\n    </span>;\n};\n\nRecommendationRating.propTypes = {\n    system: PropTypes.object\n};\n\nexport default RecommendationRating;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Grid, GridItem, Breadcrumb, BreadcrumbItem } from '@patternfly/react-core';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport { PageHeader } from '@redhat-cloud-services/frontend-components/PageHeader';\nimport { InventoryDetailHead, AppInfo, DetailWrapper } from '@redhat-cloud-services/frontend-components/Inventory';\nimport { register } from '../../store';\nimport { loadSystemInfo } from '../../store/actions';\nimport { entityDetailReducer } from '../../store/entityDetailReducer';\nimport './ros-details-page.scss';\nimport { ExpandedRow } from '../../Components/RosTable/ExpandedRow';\nimport RecommendationRating from '../../Components/RecommendationRating/RecommendationRating';\nimport { NotAuthorized } from '@redhat-cloud-services/frontend-components/NotAuthorized';\nimport { PermissionContext } from '../../App';\n\nclass RosSystemDetail extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inventoryId: this.props.match.params.inventoryId\n        };\n    }\n\n    async componentDidMount() {\n        insights.chrome?.hideGlobalFilter?.(true);\n        insights.chrome.appAction('system-detail');\n        await this.props.loadSystemInfo(this.state.inventoryId);\n    }\n\n    renderChildrenNode() {\n        if (this.props.rosSystemInfo) {\n            const {\n                cloud_provider: cloudProvider,\n                instance_type: instanceType,\n                idling_time: idlingTime, io_wait: ioWait,\n                rating\n            } = this.props.rosSystemInfo;\n            const { inventoryId } = this.props.match.params;\n            return (\n                <Grid className='ros-system-info'>\n                    <GridItem>\n                        <ExpandedRow\n                            { ...{ cloudProvider, instanceType, idlingTime, ioWait, inventoryId } }\n                        />\n                    </GridItem>\n                    <GridItem>\n                        <RecommendationRating system={ { ...{ rating, inventoryId } } } />\n                    </GridItem>\n                </Grid>\n            );\n        } else {\n            return null;\n        }\n    }\n\n    render() {\n        const entity = this.props.entity;\n        return (\n            <React.Fragment>\n                <PermissionContext.Consumer>\n                    { value =>\n                        value.permissions.systemsRead === false\n                            ? <NotAuthorized serviceName='Resource Optimization'/>\n                            : <DetailWrapper\n                                onLoad={({ mergeWithDetail, INVENTORY_ACTION_TYPES }) => {\n                                    register(mergeWithDetail(\n                                        entityDetailReducer(INVENTORY_ACTION_TYPES)\n                                    ));\n                                }}\n                                className='rosDetailWrapper'\n                            >\n                                <PageHeader>\n                                    <Breadcrumb ouiaId=\"system-detail\">\n                                        <BreadcrumbItem>\n                                            <Link to='/'>Resource Optimization</Link>\n                                        </BreadcrumbItem>\n                                        <BreadcrumbItem isActive>\n                                            <div className=\"ins-c-inventory__detail--breadcrumb-name\">\n                                                { entity ? entity.display_name : null }\n                                            </div>\n                                        </BreadcrumbItem>\n                                    </Breadcrumb>\n                                    <InventoryDetailHead\n                                        hideBack\n                                        showDelete={ false }\n                                        hideInvDrawer\n                                    />\n                                    { this.renderChildrenNode() }\n                                </PageHeader>\n                                <Main>\n                                    <Grid gutter=\"md\">\n                                        <GridItem span={12}>\n                                            <AppInfo showTags fallback=\"\" />\n                                        </GridItem>\n                                    </Grid>\n                                </Main>\n                            </DetailWrapper>\n                    }\n                </PermissionContext.Consumer>\n            </React.Fragment>\n        );\n    }\n};\n\nRosSystemDetail.propTypes = {\n    match: PropTypes.any,\n    entity: PropTypes.object,\n    loading: PropTypes.bool,\n    rosSystemInfo: PropTypes.object,\n    loadSystemInfo: PropTypes.func\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        entity: state.entityDetails && state.entityDetails.entity,\n        loading: state.systemDetailReducer?.loading,\n        rosSystemInfo: state.systemDetailReducer?.systemInfo,\n        ...props\n    };\n};\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        loadSystemInfo: (uuid) => dispatch(loadSystemInfo(uuid))\n    };\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps)(RosSystemDetail)\n);\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ros .like,.inventory .like{color:var(--pf-global--success-color--100)}.ros .dislike,.inventory .dislike{color:var(--pf-global--primary-color--100)}.ros .ratingSpanOverride,.inventory .ratingSpanOverride{font-size:var(--pf-global--FontSize--md)}.ros .ratingSpanOverride button,.inventory .ratingSpanOverride button{padding:8px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ros .ros-system-info .pf-c-content.expanded-row dl,.inventory .ros-system-info .pf-c-content.expanded-row dl{grid-row-gap:0}.ros .ros-system-info .pf-c-content.expanded-row dt,.inventory .ros-system-info .pf-c-content.expanded-row dt{font-weight:var(--pf-global--FontWeight--normal)}.ros .ros-system-info .pf-c-content.expanded-row dt:after,.inventory .ros-system-info .pf-c-content.expanded-row dt:after{content:\\\":\\\"}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./RecommendationRating.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./RecommendationRating.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, content.locals, undefined)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nexport default content.locals || {};","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./ros-details-page.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n\n  var p;\n\n  for (p in a) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n\n  for (p in b) {\n    if (isNamedExport && p === 'default') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (!a[p]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[2]!../../../node_modules/sass-loader/dist/cjs.js!./ros-details-page.scss\",\n      function () {\n        if (!isEqualLocals(oldLocals, content.locals, undefined)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nexport default content.locals || {};"],"sourceRoot":""}